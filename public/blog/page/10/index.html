<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#b100b2">
    <meta name="theme-color" content="#b100b2">

    <meta property="og:url" content="https://martinjc.com/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Martin Chorley">
    <meta property="og:site_name" content="Martin Chorley">
    <meta property="og:locale" content="en_GB">
    <meta property="article:author" content="Martin Chorley">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@martinjc">
    <meta name="twitter:url" content="https://martinjc.com">
    <meta name="twitter:title" content="Martin Chorley">

    <link rel="icon" href="/img/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Roboto|Scope+One" rel="stylesheet">
    <link rel="stylesheet" href="/css/main.css">
</head><body><header>
    <div class="social">
        <ul>
            <li><a href="https://www.twitter.com/martinjc" class="icon twitter" title="Twitter"><svg viewBox="0 0 512 512">
                        <path d="M419.6 168.6c-11.7 5.2-24.2 8.7-37.4 10.2 13.4-8.1 23.8-20.8 28.6-36 -12.6 7.5-26.5 12.9-41.3 15.8 -11.9-12.6-28.8-20.6-47.5-20.6 -42 0-72.9 39.2-63.4 79.9 -54.1-2.7-102.1-28.6-134.2-68 -17 29.2-8.8 67.5 20.1 86.9 -10.7-0.3-20.7-3.3-29.5-8.1 -0.7 30.2 20.9 58.4 52.2 64.6 -9.2 2.5-19.2 3.1-29.4 1.1 8.3 25.9 32.3 44.7 60.8 45.2 -27.4 21.4-61.8 31-96.4 27 28.8 18.5 63 29.2 99.8 29.2 120.8 0 189.1-102.1 185-193.6C399.9 193.1 410.9 181.7 419.6 168.6z" /></svg>
                    </a></li>
            <li><a href="mailto:ChorleyMJ@Cardiff.ac.uk" class="icon email" title="Email"><svg viewBox="0 0 512 512">
                        <path d="M101.3 141.6v228.9h0.3 308.4 0.8V141.6H101.3zM375.7 167.8l-119.7 91.5 -119.6-91.5H375.7zM127.6 194.1l64.1 49.1 -64.1 64.1V194.1zM127.8 344.2l84.9-84.9 43.2 33.1 43-32.9 84.7 84.7L127.8 344.2 127.8 344.2zM384.4 307.8l-64.4-64.4 64.4-49.3V307.8z" /></svg>
                    </a></li>
            <li><a href="https://www.facebook.com/martin.chorley" class="icon facebook" title="Facebook"><svg viewBox="0 0 512 512">
                        <path d="M211.9 197.4h-36.7v59.9h36.7V433.1h70.5V256.5h49.2l5.2-59.1h-54.4c0 0 0-22.1 0-33.7 0-13.9 2.8-19.5 16.3-19.5 10.9 0 38.2 0 38.2 0V82.9c0 0-40.2 0-48.8 0 -52.5 0-76.1 23.1-76.1 67.3C211.9 188.8 211.9 197.4 211.9 197.4z" /></svg>
                    </a></li>
            <li><a href="https://www.github.com/martinjc" class="icon github" title="GitHub"><svg viewBox="0 0 512 512">
                        <path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z" /></svg>
                    </a></li>
            <li><a href="https://www.instagram.com/martinjam" class="icon instagram" title="Instagram"><svg viewBox="0 0 512 512">
                        <g>
                            <path d="M256 109.3c47.8 0 53.4 0.2 72.3 1 17.4 0.8 26.9 3.7 33.2 6.2 8.4 3.2 14.3 7.1 20.6 13.4 6.3 6.3 10.1 12.2 13.4 20.6 2.5 6.3 5.4 15.8 6.2 33.2 0.9 18.9 1 24.5 1 72.3s-0.2 53.4-1 72.3c-0.8 17.4-3.7 26.9-6.2 33.2 -3.2 8.4-7.1 14.3-13.4 20.6 -6.3 6.3-12.2 10.1-20.6 13.4 -6.3 2.5-15.8 5.4-33.2 6.2 -18.9 0.9-24.5 1-72.3 1s-53.4-0.2-72.3-1c-17.4-0.8-26.9-3.7-33.2-6.2 -8.4-3.2-14.3-7.1-20.6-13.4 -6.3-6.3-10.1-12.2-13.4-20.6 -2.5-6.3-5.4-15.8-6.2-33.2 -0.9-18.9-1-24.5-1-72.3s0.2-53.4 1-72.3c0.8-17.4 3.7-26.9 6.2-33.2 3.2-8.4 7.1-14.3 13.4-20.6 6.3-6.3 12.2-10.1 20.6-13.4 6.3-2.5 15.8-5.4 33.2-6.2C202.6 109.5 208.2 109.3 256 109.3M256 77.1c-48.6 0-54.7 0.2-73.8 1.1 -19 0.9-32.1 3.9-43.4 8.3 -11.8 4.6-21.7 10.7-31.7 20.6 -9.9 9.9-16.1 19.9-20.6 31.7 -4.4 11.4-7.4 24.4-8.3 43.4 -0.9 19.1-1.1 25.2-1.1 73.8 0 48.6 0.2 54.7 1.1 73.8 0.9 19 3.9 32.1 8.3 43.4 4.6 11.8 10.7 21.7 20.6 31.7 9.9 9.9 19.9 16.1 31.7 20.6 11.4 4.4 24.4 7.4 43.4 8.3 19.1 0.9 25.2 1.1 73.8 1.1s54.7-0.2 73.8-1.1c19-0.9 32.1-3.9 43.4-8.3 11.8-4.6 21.7-10.7 31.7-20.6 9.9-9.9 16.1-19.9 20.6-31.7 4.4-11.4 7.4-24.4 8.3-43.4 0.9-19.1 1.1-25.2 1.1-73.8s-0.2-54.7-1.1-73.8c-0.9-19-3.9-32.1-8.3-43.4 -4.6-11.8-10.7-21.7-20.6-31.7 -9.9-9.9-19.9-16.1-31.7-20.6 -11.4-4.4-24.4-7.4-43.4-8.3C310.7 77.3 304.6 77.1 256 77.1L256 77.1z" />
                            <path d="M256 164.1c-50.7 0-91.9 41.1-91.9 91.9s41.1 91.9 91.9 91.9 91.9-41.1 91.9-91.9S306.7 164.1 256 164.1zM256 315.6c-32.9 0-59.6-26.7-59.6-59.6s26.7-59.6 59.6-59.6 59.6 26.7 59.6 59.6S288.9 315.6 256 315.6z" />
                            <circle cx="351.5" cy="160.5" r="21.5" />
                        </g>
                    </svg>
                    </a></li>
            <li><a href="https://www.last.fm/user/takitomouse" class="icon lastfm" title="Last.fm"><svg viewBox="0 0 512 512">
                        <path d="M230.104 336.568l-13.607-36.988c0 0-22.11 24.66-55.268 24.66 -29.341 0-50.172-25.512-50.172-66.328 0-52.293 26.359-71.001 52.297-71.001 37.412 0 49.316 24.234 59.522 55.273l13.607 42.518c13.603 41.236 39.113 74.402 112.666 74.402 52.727 0 88.437-16.155 88.437-58.672 0-34.438-19.56-52.297-56.125-60.802l-27.209-5.951c-18.707-4.252-24.233-11.906-24.233-24.659 0-14.456 11.478-22.96 30.189-22.96 20.406 0 31.458 7.653 33.162 25.935l42.516-5.103c-3.402-38.263-29.761-53.996-73.127-53.996 -38.266 0-75.68 14.456-75.68 60.799 0 28.912 14.029 47.197 49.315 55.697l28.916 6.801c21.683 5.104 28.908 14.031 28.908 26.363 0 15.73-15.305 22.107-44.218 22.107 -42.941 0-60.794-22.534-70.999-53.574l-14.032-42.513c-17.854-55.271-46.342-75.68-102.892-75.68 -62.499-0.001-95.663 39.538-95.663 106.715 0 64.628 33.164 99.489 92.689 99.489C207.141 359.1 230.104 336.568 230.104 336.568L230.104 336.568z" /></svg>
                    </a></li>
            <li><a href="https://uk.linkedin.com/in/martinchorley" class="icon linkedin" title="LinkedIn"><svg viewBox="0 0 512 512">
                        <path d="M186.4 142.4c0 19-15.3 34.5-34.2 34.5 -18.9 0-34.2-15.4-34.2-34.5 0-19 15.3-34.5 34.2-34.5C171.1 107.9 186.4 123.4 186.4 142.4zM181.4 201.3h-57.8V388.1h57.8V201.3zM273.8 201.3h-55.4V388.1h55.4c0 0 0-69.3 0-98 0-26.3 12.1-41.9 35.2-41.9 21.3 0 31.5 15 31.5 41.9 0 26.9 0 98 0 98h57.5c0 0 0-68.2 0-118.3 0-50-28.3-74.2-68-74.2 -39.6 0-56.3 30.9-56.3 30.9v-25.2H273.8z" /></svg>
                    </a></li>
        </ul>
    </div>


    <nav>
        <ul>|
            <li><a href="/">&nbsp;home</a>&nbsp;|</li>
            <li><a href="/blog">&nbsp;blog</a>&nbsp;|</li>
            <li><a href="/teaching">&nbsp;teaching</a>&nbsp;|</li>
            <li><a href="/research">&nbsp;research</a>&nbsp;|</li>
            <li><a href="/publications">&nbsp;publications</a>&nbsp;|</li>
        </ul>
    </nav>
</header><div id="content">
<main>
    

<ul class="pagination">
    
    <li class="page-item">
        <a href="/blog/" class="page-link" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
    </li>
    
    <li class="page-item">
    <a href="/blog/page/9/" class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
    </li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/blog/">1</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/blog/page/2/">2</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/blog/page/3/">3</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item disabled"><span aria-hidden="true">&nbsp;&hellip;&nbsp;</span></li>
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/blog/page/9/">9</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item active"><a class="page-link" href="/blog/page/10/">10</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/blog/page/11/">11</a></li>
    
    
    <li class="page-item">
    <a href="/blog/page/11/" class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
    </li>
    
    <li class="page-item">
        <a href="/blog/page/11/" class="page-link" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
    </li>
    
</ul>

    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/06/17/bad-foursquare-day.../">
                    Bad Foursquare Day...
                </a></h1>
            <p class="author">
                <span class="date">Friday, Jun 17, 2011</span>
            </p>
        </header>
        <div class="content">
            <p>I can understand losing mayorships, but when it&rsquo;s somebody close to you and she steals two from you in one day, it&rsquo;s ridiculous:</p>

<p>I will have my revenge&hellip;</p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/06/14/curop-project/">
                    Curop Project
                </a></h1>
            <p class="author">
                <span class="date">Tuesday, Jun 14, 2011</span>
            </p>
        </header>
        <div class="content">
            <p>Some excellent news yesterday as we&rsquo;ve heard that we&rsquo;ve got the <a href="http://learning.cf.ac.uk/projects-funding/curop/">CUROP</a> funding for the <a href="http://users.cs.cf.ac.uk/M.J.Chorley/research/augmented-conversation/">summer project</a> that I previously <a href="http://users.cs.cf.ac.uk/M.J.Chorley/2011/06/03/summer-project/">mentioned</a>.</p>

<p>All being well, it should start within the next couple of weeks, so I&rsquo;ll update with the progress once there is some!</p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/06/09/logging-in-to-websites-with-python/">
                    Logging in to websites with python
                </a></h1>
            <p class="author">
                <span class="date">Thursday, Jun 9, 2011</span>
            </p>
        </header>
        <div class="content">
            <p>As <a href="http://users.cs.cf.ac.uk/M.J.Chorley/2011/06/09/scraping-myfitnesspal-dat/">previously explained</a>, I needed a python script to login to a website so I could access data. There&rsquo;s loads of examples out on the web of how to do this, my solution (mashed together from many examples) is described below. For the whole script, jump to the end.</p>

<p>Firstly, we need to set some simple variables about the website we&rsquo;re trying to log in to. Obviously, I&rsquo;m trying to login to myfitnesspal, but this process should work with most websites that use a simple form + cookie based login process. We need to set the url we are trying to access, where to post the login information to, and a file to store cookies in:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># url for website        </span>
base_url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;http://www.myfitnesspal.com&#39;</span>       
<span style="color:#75715e"># login action we want to post data to       </span>
login_action <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/account/login&#39;</span>       
<span style="color:#75715e"># file for storing cookies       </span>
cookie_file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;mfp.cookies&#39;</span></code></pre></div>
Then we need to setup our cookie storage, and url opener. We want the opener to be able to handle cookies and redirects:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> urllib<span style="color:#f92672">,</span> urllib2
<span style="color:#f92672">import</span> cookielib

<span style="color:#75715e"># set up a cookie jar to store cookies</span>
cj <span style="color:#f92672">=</span> cookielib<span style="color:#f92672">.</span>MozillaCookieJar(cookie_file)

<span style="color:#75715e"># set up opener to handle cookies, redirects etc</span>
self<span style="color:#f92672">.</span>opener <span style="color:#f92672">=</span> urllib2<span style="color:#f92672">.</span>build_opener(
     urllib2<span style="color:#f92672">.</span>HTTPRedirectHandler(),
     urllib2<span style="color:#f92672">.</span>HTTPHandler(debuglevel<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>),
     urllib2<span style="color:#f92672">.</span>HTTPSHandler(debuglevel<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>),            
     urllib2<span style="color:#f92672">.</span>HTTPCookieProcessor(cj)
)
<span style="color:#75715e"># pretend we&#39;re a web browser and not a python script</span>
opener<span style="color:#f92672">.</span>addheaders <span style="color:#f92672">=</span> [(<span style="color:#e6db74">&#39;User-agent&#39;</span>,
    (<span style="color:#e6db74">&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_7) &#39;</span>
     <span style="color:#e6db74">&#39;AppleWebKit/535.1 (KHTML, like Gecko) &#39;</span>
     <span style="color:#e6db74">&#39;Chrome/13.0.782.13 Safari/535.1&#39;</span>))
]</code></pre></div>
Next we need to open the front page of the website once to set any initial tracking cookies:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># open the front page of the website to set</span>
<span style="color:#75715e"># and save initial cookies</span>
response <span style="color:#f92672">=</span> opener<span style="color:#f92672">.</span>open(base_url)
cj<span style="color:#f92672">.</span>save()<span style="color:#f92672">&lt;/</span>pre<span style="color:#f92672">&gt;</span>
Then <span style="color:#66d9ef">finally</span> we can call the login action <span style="color:#66d9ef">with</span> our username <span style="color:#f92672">and</span> password <span style="color:#f92672">and</span> login to the website:
<span style="color:#f92672">&lt;</span>pre<span style="color:#f92672">&gt;</span><span style="color:#75715e"># parameters for login action</span>
login_data <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>urlencode({
    <span style="color:#e6db74">&#39;username&#39;</span> : <span style="color:#e6db74">&#39;my_username&#39;</span>,
    <span style="color:#e6db74">&#39;password&#39;</span> : <span style="color:#e6db74">&#39;my_password&#39;</span>,
    <span style="color:#e6db74">&#39;remember_me&#39;</span> : True
})
<span style="color:#75715e"># construct the url</span>
login_url <span style="color:#f92672">=</span> base_url <span style="color:#f92672">+</span> login_action
<span style="color:#75715e"># then open it</span>
response <span style="color:#f92672">=</span> opener<span style="color:#f92672">.</span>open(login_url, login_data)
<span style="color:#75715e"># save the cookies and return the response       </span>
cj<span style="color:#f92672">.</span>save()</code></pre></div>
The parameters for the POST request (and the action to POST to) can usually be found by examining the source of the login page.</p>

<p>There you have it - you should now be logged into the website and can access any pages that the logged in user can normally access through a web browser. Any calls using the &lsquo;opener&rsquo; created above will present the right cookies for the logged in user. The cookies are saved to file, so next time you run the script you can check for cookies, try and use them, and only re-login if that doesn&rsquo;t work.</p>

<p>My full version is <a href="http://martinchorley.com/img/{{ page.date | date: &quot;%Y-%m-%d&quot;}}-{{page.slug}}/web_login.py_2.txt">attached</a> to this post, it&rsquo;s under a <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a> license, so feel free to use it for whatever.</p>

<p>Quite how this will cope when websites catch up to the new EU cookie legislation is anyone&rsquo;s guess. My guess is it won&rsquo;t.</p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/06/09/scraping-data-from-myfitnesspal-with-python/">
                    Scraping data from MyFitnessPal with python
                </a></h1>
            <p class="author">
                <span class="date">Thursday, Jun 9, 2011</span>
            </p>
        </header>
        <div class="content">
            <p>Following my <a href="http://users.cs.cf.ac.uk/M.J.Chorley/2011/06/07/web-search-wordle/">success</a> with <a href="http://users.cs.cf.ac.uk/M.J.Chorley/2011/06/05/google-web-history/">extracting</a> my Google Search History in a simple manner, I&rsquo;ve decided that I should do something similar to extract all the data I&rsquo;ve been feeding into <a href="http://www.myfitnesspal.com">myfitnesspal</a> for the last 5 months. As I briefly mentioned in the <a href="http://users.cs.cf.ac.uk/M.J.Chorley/2011/06/07/reviewmfp/">review of the app + website</a>, the progress graphs leave a lot to be desired and there&rsquo;s very little in the way of analysis of the data. I have a lot of questions about my progress and there is no easy way to answer all of them using just the website. For instance, what is my average sugar intake? Is this more or less than my target intake? How does my weekend nutrition compare to my weekday nutrition? How much beer have I drunk since starting to log all my food?</p>

<p>Unfortunately there isn&rsquo;t an API for the website yet, so I&rsquo;m going to need to resort to screen scraping to extract it all. This should be pretty easy using the <a href="http://www.crummy.com/software/BeautifulSoup/">BeautifulSoup</a> python library, but first I need to get access to the data. My food diary isn&rsquo;t public, so I need to be logged in to get access to it. This means my scraping script needs to pretend to be a web browser and log me in to the website in order to access the pages I need.</p>

<p>I initially toyed with the idea of reading cookies from the web browser sqlite cookie database, but this is overly complex. It&rsquo;s actually much easier just using python to do the login as a POST request and to store any cookies received back from that. Fortunately I&rsquo;m not the first person to try and do this, so there&rsquo;s <a href="http://stackoverflow.com/questions/2954381/python-form-post-using-urllib2-also-question-on-saving-using-cookies">plenty</a> of <a href="http://stackoverflow.com/questions/301924/python-urllib-urllib2-httplib-confusion">examples</a> on <a href="http://www.stackoverflow.com">StackOverflow</a> of how to do it. I&rsquo;ll post my own solution once it&rsquo;s done.</p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/06/08/losing-weight-in-2011-continued...-libra/">
                    Losing Weight in 2011 continued... Libra
                </a></h1>
            <p class="author">
                <span class="date">Wednesday, Jun 8, 2011</span>
            </p>
        </header>
        <div class="content">
            <p>Another of the very useful apps I&rsquo;ve been using since the start of the &ldquo;New Regime&rdquo; is Libra. It totally makes up for the crappy progress graphs on the MyFitnessPal website or in the mobile app.</p>

<p>It&rsquo;s an app that has a singular purpose: it&rsquo;s just for tracking weight. But it does it very well. You enter a weight for every day, it works out statistics based on those weights, calculates the trend value for your weight, (so smoothes out daily fluctuations caused by water intake etc), and predicts when you&rsquo;ll hit your target. It performs a weekly backup of data to the SD card, and will export data in csv format too.</p>

<p>The Libra app is available on the android market for <a href="https://market.android.com/details?id=net.cachapa.libra&amp;feature=search_result">free</a>, with a <a href="https://market.android.com/details?id=net.cachapa.libra.plugin.pro&amp;feature=search_result">paid ad-free version</a> also available.</p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/06/07/google-web-history-wordle/">
                    Google Web History - Wordle
                </a></h1>
            <p class="author">
                <span class="date">Tuesday, Jun 7, 2011</span>
            </p>
        </header>
        <div class="content">
            <p>So, you&rsquo;ve <a href="http://users.cs.cf.ac.uk/M.J.Chorley/2011/06/05/google-web-history/">downloaded your Google search history</a>, what&rsquo;s the first thing you do? Split all the queries into individual words and make a wordle of course:</p>










<figure>
    <img src="/2011/06/07/google-web-history-wordle/wordle2-300x137.png" width="300" height="137" alt="A wordle of my Google search queries">
    <figcaption>
        <small>
            A wordle of my Google search queries
        </small>
    </figcaption>
</figure>

<p>There we have it - my use of Google for five years. Turns out I do programming and live in Cardiff. Who&rsquo;d have thought it?</p>

<p>**edit: **why have I googled for google so much?</p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/06/07/losing-weight-in-2011-continued...-my-fitness-pal/">
                    Losing Weight in 2011 continued... My Fitness Pal
                </a></h1>
            <p class="author">
                <span class="date">Tuesday, Jun 7, 2011</span>
            </p>
        </header>
        <div class="content">
            

<p>(The first in a series of posts on apps I&rsquo;ve found useful under &lsquo;the new regime&rsquo;)</p>

<p>One of the best apps/services I&rsquo;ve found for general fitness and nutrition and weight loss is <a href="http://www.myfitnesspal.com/">MyFitnessPal</a>. I&rsquo;m fairly sure I wouldn&rsquo;t have made quite as good progress without it.</p>

<p>The main selling point of the service is that it allows you to track what you eat and what exercise you do, in order to monitor and help regulate your calorific intake. When you create an account you put in the usual details as well as your weight and height, tell it how much activity you do on a daily basis and how much weight you&rsquo;d like to lose, and it works out how many calories you should eat each day to hit that target. All you have to do is enter the food you eat (by searching the food database) and the exercise you do (cardiovascular/strength training can be entered separately) and it calculates your net deficit/over spend each day.</p>

<p>I&rsquo;m a big sucker for life-logging, and logging each part of each meal takes this to the extreme. I now have almost 5 months of data on what I&rsquo;ve been eating. Why I&rsquo;d want this, I&rsquo;m not sure, but it&rsquo;s there now! The service also handles logging stats such as weight, waist, neck and chest measurements, although the progress graphs for these leave a lot to be desired. Like most good services, this is a website with associated mobile app, with android, iPhone and blackberry versions available.</p>

<p>**Features:
**Large database of foods with calorific and nutritional information
Easy logging of food and exercise, weight and measurements
Adjusts calorie allowance as weight changes
Social features - friends, forums etc</p>

<p>**Pros:
**Free!
Mobile app makes it easy to log food or exercise while out and about
Easy to stay on top of calorific intake - actually helps with weight loss
Lots of support, encouragement and advice on forums
Can contribute to database if food is missing
Can report inaccurate data, up-vote correct data</p>

<p><strong>Cons:</strong>
Users can contribute to database and some users are stupid
Progress graphs are pretty useless
Mobile app and website sometimes disagree on calories burnt from exercise</p>

<p>The MyFitnessPal website is at <a href="http://www.myfitnesspal.com">http://www.myfitnesspal.com </a>and the mobile apps are available <a href="http://www.myfitnesspal.com/mobile">here</a>.</p>

<h5 id="thanks-to-my-good-friend-christopher-http-twitter-com-myfavouritecake-for-the-initial-heads-up-on-this-site">(thanks to my good friend <a href="http://twitter.com/#!/myfavouritecake">Christopher</a> for the initial heads up on this site!)</h5>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/06/05/how-to-access-and-download-your-google-web-history-with-wget/">
                    How to access and download your Google Web History with wget
                </a></h1>
            <p class="author">
                <span class="date">Sunday, Jun 5, 2011</span>
            </p>
        </header>
        <div class="content">
            <p><a href="https://www.google.com/history/">Google Web History</a> has now been recording all of the searches I made in Google since about 2005. Obviously 6 years of search queries and results is a phenomenal amount of data, and it would be nice to get hold of it all to see what I could make of it. Fortunately Google make the data available as an RSS feed, although it&rsquo;s not particularly well <a href="http://www.google.com/support/accounts/bin/answer.py?hl=en&amp;answer=54464">documented</a>.</p>

<p>(caution - many &lsquo;ifs&rsquo; coming up next)</p>

<p>If you&rsquo;re logged into your Google account the rss feed can be accessed at:</p>

<pre><code>https://www.google.com/history/?q=&amp;output=rss&amp;num=NUM&amp;start=START
</code></pre>

<p>If you&rsquo;re using a *nix based operating system (Linux, Mac OS X etc) you can then use wget on the command line to get the data. The below example works for retrieving the 1000 most recent searches in your history:</p>

<pre><code>wget --user=GOOGLE_USERNAME  \
--password=PASSWORD --no-check-certificate \
&quot;https://www.google.com/history/?q=&amp;output=rss&amp;num=1000&amp;start=0&quot;
</code></pre>

<p>If you&rsquo;ve enabled 2-factor authentication on your google account you&rsquo;ll need to add an <a href="https://www.google.com/accounts/IssuedAuthSubTokens">app-specific</a> password for wget so it can access your account - the password in the example above should be this app-specific password, not your main account password. If you haven&rsquo;t enabled 2 factor authentication then you might be able to use your normal account password, but I haven&rsquo;t tested this.</p>

<p>A simple bash script will then allow you to download the entire search history:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">for</span> START in <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1000</span> <span style="color:#ae81ff">2000</span> <span style="color:#ae81ff">3000</span> ... <span style="color:#ae81ff">50000</span>  
<span style="color:#66d9ef">do</span>   
 wget --user<span style="color:#f92672">=</span>GOOGLE_USERNAME <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --password<span style="color:#f92672">=</span>WGET_APP_SPECIFIC_PASSWORD --no-check-certificate <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#34;https://www.google.com/history/?output=rss&amp;amp;num=1000&amp;amp;start=</span>$START<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">done</span></code></pre></div>
You may need to adjust the numbers in the first line - I had to go up to 50000 to get my entire search history back to 2005, you may need to make fewer calls if your history is shorter, or more if its longer.</p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/06/05/losing-weight-in-2011/">
                    Losing weight in 2011
                </a></h1>
            <p class="author">
                <span class="date">Sunday, Jun 5, 2011</span>
            </p>
        </header>
        <div class="content">
            <p>Since the beginning of the year I&rsquo;ve been living under what we&rsquo;ve been calling &lsquo;the new regime&rsquo;. This &lsquo;new regime&rsquo; basically involves not living like a fat useless slob, so I&rsquo;ve been getting fit, eating healthily and losing weight. So far I&rsquo;ve lost over 10kg and can now run around the park a few times without collapsing to the floor clutching at my chest and screaming about ambulances, so I&rsquo;d say its going pretty well. The basic concept behind the new regime is:</p>

<p><em>Eat less + do more = lose weight.</em></p>

<p>This will be followed once some weight has been lost by:</p>

<p>_Eat a normal amount + do more = stay the same. _</p>

<p>About a month ago, I came across someone somewhere on the internet recommending &ldquo;<strong><a href="http://www.fourmilab.ch/hackdiet/www/hackdiet.html">The Hacker&rsquo;s Diet</a></strong>&rdquo; as a guide for weight loss. Not having read such a guide before I started on &lsquo;the new regime&rsquo; I skimmed it a bit; the tl;dr version is:</p>

<p><em>Eat less + do more = lose weight.</em></p>

<p>This doesn&rsquo;t exactly seem like rocket science to me, but lots of people seem to have a problem grasping this concept. <strong>The Hacker&rsquo;s Diet</strong> does a pretty decent job of describing the human body as a simple system with inputs and outputs and manages to explain that if you limit your input and increase your output, you get a deficit and lose weight. So if you find anyone that says &lsquo;Oh, I really struggle to lose weight&rsquo;, slap them round the back of the head and point them in that direction.</p>

<p>The whole point of this post is that the last couple of chapters of the book contain a lot of information about tracking the calories you eat, the calories you burn, analysing trend from daily weight figures and so on. There&rsquo;s a lot of detail on how to create spreadsheets to calculate weight trends, how to keep a daily log of calorie intake, and pages and pages of calorific information for food. The thing is, it&rsquo;s 2011 now so none of those chapters are necessary, because as with anything that&rsquo;s a pain in the rear end there are now loads of apps available to make life easier. As I&rsquo;ve been using a number of them for 5 months I figure I&rsquo;ll share the knowledge and review some of them over the next few days.</p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/06/03/summer-project/">
                    Summer project
                </a></h1>
            <p class="author">
                <span class="date">Friday, Jun 3, 2011</span>
            </p>
        </header>
        <div class="content">
            <p>Over the summer, Ian and I are going to be supervising a summer project. We&rsquo;re going to get a 2nd year undergraduate student for an 8 week project. I&rsquo;ve stuck up a page about it <a href="http://users.cs.cf.ac.uk/M.J.Chorley/research/augmented-conversation/">here</a>, and will post whenever there&rsquo;s something interesting to see.</p>

        </div>
    </article>
    
    

<ul class="pagination">
    
    <li class="page-item">
        <a href="/blog/" class="page-link" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
    </li>
    
    <li class="page-item">
    <a href="/blog/page/9/" class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
    </li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/blog/">1</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/blog/page/2/">2</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/blog/page/3/">3</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item disabled"><span aria-hidden="true">&nbsp;&hellip;&nbsp;</span></li>
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/blog/page/9/">9</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item active"><a class="page-link" href="/blog/page/10/">10</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/blog/page/11/">11</a></li>
    
    
    <li class="page-item">
    <a href="/blog/page/11/" class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
    </li>
    
    <li class="page-item">
        <a href="/blog/page/11/" class="page-link" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
    </li>
    
</ul>

</main>

    </div><script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-25500481-1', 'auto');
    ga('send', 'pageview');

</script>
<script>window.twttr = (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0],
            t = window.twttr || {};
        if (d.getElementById(id)) return t;
        js = d.createElement(s);
        js.id = id;
        js.src = "https://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js, fjs);

        t._e = [];
        t.ready = function (f) {
            t._e.push(f);
        };

        return t;
    }(document, "script", "twitter-wjs"));
</script></body>

</html>