<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#b100b2">
    <meta name="theme-color" content="#b100b2">

    <meta property="og:url" content="https://martinjc.com/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Martin Chorley">
    <meta property="og:site_name" content="Martin Chorley">
    <meta property="og:locale" content="en_GB">
    <meta property="article:author" content="Martin Chorley">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@martinjc">
    <meta name="twitter:url" content="https://martinjc.com">
    <meta name="twitter:title" content="Martin Chorley">

    <link rel="icon" href="/img/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Roboto|Scope+One" rel="stylesheet">
    <link rel="stylesheet" href="/css/main.css">
</head><body><header>
    <div class="social">
        <ul>
            <li><a href="https://www.twitter.com/martinjc" class="icon twitter" title="Twitter"><svg viewBox="0 0 512 512">
                        <path d="M419.6 168.6c-11.7 5.2-24.2 8.7-37.4 10.2 13.4-8.1 23.8-20.8 28.6-36 -12.6 7.5-26.5 12.9-41.3 15.8 -11.9-12.6-28.8-20.6-47.5-20.6 -42 0-72.9 39.2-63.4 79.9 -54.1-2.7-102.1-28.6-134.2-68 -17 29.2-8.8 67.5 20.1 86.9 -10.7-0.3-20.7-3.3-29.5-8.1 -0.7 30.2 20.9 58.4 52.2 64.6 -9.2 2.5-19.2 3.1-29.4 1.1 8.3 25.9 32.3 44.7 60.8 45.2 -27.4 21.4-61.8 31-96.4 27 28.8 18.5 63 29.2 99.8 29.2 120.8 0 189.1-102.1 185-193.6C399.9 193.1 410.9 181.7 419.6 168.6z" /></svg>
                    </a></li>
            <li><a href="mailto:ChorleyMJ@Cardiff.ac.uk" class="icon email" title="Email"><svg viewBox="0 0 512 512">
                        <path d="M101.3 141.6v228.9h0.3 308.4 0.8V141.6H101.3zM375.7 167.8l-119.7 91.5 -119.6-91.5H375.7zM127.6 194.1l64.1 49.1 -64.1 64.1V194.1zM127.8 344.2l84.9-84.9 43.2 33.1 43-32.9 84.7 84.7L127.8 344.2 127.8 344.2zM384.4 307.8l-64.4-64.4 64.4-49.3V307.8z" /></svg>
                    </a></li>
            <li><a href="https://www.facebook.com/martin.chorley" class="icon facebook" title="Facebook"><svg viewBox="0 0 512 512">
                        <path d="M211.9 197.4h-36.7v59.9h36.7V433.1h70.5V256.5h49.2l5.2-59.1h-54.4c0 0 0-22.1 0-33.7 0-13.9 2.8-19.5 16.3-19.5 10.9 0 38.2 0 38.2 0V82.9c0 0-40.2 0-48.8 0 -52.5 0-76.1 23.1-76.1 67.3C211.9 188.8 211.9 197.4 211.9 197.4z" /></svg>
                    </a></li>
            <li><a href="https://www.github.com/martinjc" class="icon github" title="GitHub"><svg viewBox="0 0 512 512">
                        <path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z" /></svg>
                    </a></li>
            <li><a href="https://www.instagram.com/martinjam" class="icon instagram" title="Instagram"><svg viewBox="0 0 512 512">
                        <g>
                            <path d="M256 109.3c47.8 0 53.4 0.2 72.3 1 17.4 0.8 26.9 3.7 33.2 6.2 8.4 3.2 14.3 7.1 20.6 13.4 6.3 6.3 10.1 12.2 13.4 20.6 2.5 6.3 5.4 15.8 6.2 33.2 0.9 18.9 1 24.5 1 72.3s-0.2 53.4-1 72.3c-0.8 17.4-3.7 26.9-6.2 33.2 -3.2 8.4-7.1 14.3-13.4 20.6 -6.3 6.3-12.2 10.1-20.6 13.4 -6.3 2.5-15.8 5.4-33.2 6.2 -18.9 0.9-24.5 1-72.3 1s-53.4-0.2-72.3-1c-17.4-0.8-26.9-3.7-33.2-6.2 -8.4-3.2-14.3-7.1-20.6-13.4 -6.3-6.3-10.1-12.2-13.4-20.6 -2.5-6.3-5.4-15.8-6.2-33.2 -0.9-18.9-1-24.5-1-72.3s0.2-53.4 1-72.3c0.8-17.4 3.7-26.9 6.2-33.2 3.2-8.4 7.1-14.3 13.4-20.6 6.3-6.3 12.2-10.1 20.6-13.4 6.3-2.5 15.8-5.4 33.2-6.2C202.6 109.5 208.2 109.3 256 109.3M256 77.1c-48.6 0-54.7 0.2-73.8 1.1 -19 0.9-32.1 3.9-43.4 8.3 -11.8 4.6-21.7 10.7-31.7 20.6 -9.9 9.9-16.1 19.9-20.6 31.7 -4.4 11.4-7.4 24.4-8.3 43.4 -0.9 19.1-1.1 25.2-1.1 73.8 0 48.6 0.2 54.7 1.1 73.8 0.9 19 3.9 32.1 8.3 43.4 4.6 11.8 10.7 21.7 20.6 31.7 9.9 9.9 19.9 16.1 31.7 20.6 11.4 4.4 24.4 7.4 43.4 8.3 19.1 0.9 25.2 1.1 73.8 1.1s54.7-0.2 73.8-1.1c19-0.9 32.1-3.9 43.4-8.3 11.8-4.6 21.7-10.7 31.7-20.6 9.9-9.9 16.1-19.9 20.6-31.7 4.4-11.4 7.4-24.4 8.3-43.4 0.9-19.1 1.1-25.2 1.1-73.8s-0.2-54.7-1.1-73.8c-0.9-19-3.9-32.1-8.3-43.4 -4.6-11.8-10.7-21.7-20.6-31.7 -9.9-9.9-19.9-16.1-31.7-20.6 -11.4-4.4-24.4-7.4-43.4-8.3C310.7 77.3 304.6 77.1 256 77.1L256 77.1z" />
                            <path d="M256 164.1c-50.7 0-91.9 41.1-91.9 91.9s41.1 91.9 91.9 91.9 91.9-41.1 91.9-91.9S306.7 164.1 256 164.1zM256 315.6c-32.9 0-59.6-26.7-59.6-59.6s26.7-59.6 59.6-59.6 59.6 26.7 59.6 59.6S288.9 315.6 256 315.6z" />
                            <circle cx="351.5" cy="160.5" r="21.5" />
                        </g>
                    </svg>
                    </a></li>
            <li><a href="https://www.last.fm/user/takitomouse" class="icon lastfm" title="Last.fm"><svg viewBox="0 0 512 512">
                        <path d="M230.104 336.568l-13.607-36.988c0 0-22.11 24.66-55.268 24.66 -29.341 0-50.172-25.512-50.172-66.328 0-52.293 26.359-71.001 52.297-71.001 37.412 0 49.316 24.234 59.522 55.273l13.607 42.518c13.603 41.236 39.113 74.402 112.666 74.402 52.727 0 88.437-16.155 88.437-58.672 0-34.438-19.56-52.297-56.125-60.802l-27.209-5.951c-18.707-4.252-24.233-11.906-24.233-24.659 0-14.456 11.478-22.96 30.189-22.96 20.406 0 31.458 7.653 33.162 25.935l42.516-5.103c-3.402-38.263-29.761-53.996-73.127-53.996 -38.266 0-75.68 14.456-75.68 60.799 0 28.912 14.029 47.197 49.315 55.697l28.916 6.801c21.683 5.104 28.908 14.031 28.908 26.363 0 15.73-15.305 22.107-44.218 22.107 -42.941 0-60.794-22.534-70.999-53.574l-14.032-42.513c-17.854-55.271-46.342-75.68-102.892-75.68 -62.499-0.001-95.663 39.538-95.663 106.715 0 64.628 33.164 99.489 92.689 99.489C207.141 359.1 230.104 336.568 230.104 336.568L230.104 336.568z" /></svg>
                    </a></li>
            <li><a href="https://uk.linkedin.com/in/martinchorley" class="icon linkedin" title="LinkedIn"><svg viewBox="0 0 512 512">
                        <path d="M186.4 142.4c0 19-15.3 34.5-34.2 34.5 -18.9 0-34.2-15.4-34.2-34.5 0-19 15.3-34.5 34.2-34.5C171.1 107.9 186.4 123.4 186.4 142.4zM181.4 201.3h-57.8V388.1h57.8V201.3zM273.8 201.3h-55.4V388.1h55.4c0 0 0-69.3 0-98 0-26.3 12.1-41.9 35.2-41.9 21.3 0 31.5 15 31.5 41.9 0 26.9 0 98 0 98h57.5c0 0 0-68.2 0-118.3 0-50-28.3-74.2-68-74.2 -39.6 0-56.3 30.9-56.3 30.9v-25.2H273.8z" /></svg>
                    </a></li>
        </ul>
    </div>


    <nav>
        <ul>|
            <li><a href="/">&nbsp;home</a>&nbsp;|</li>
            <li><a href="/blog">&nbsp;blog</a>&nbsp;|</li>
            <li><a href="/teaching">&nbsp;teaching</a>&nbsp;|</li>
            <li><a href="/research">&nbsp;research</a>&nbsp;|</li>
            <li><a href="/publications">&nbsp;publications</a>&nbsp;|</li>
        </ul>
    </nav>
</header><div id="content">
<main>
    

<ul class="pagination">
    
    <li class="page-item">
        <a href="/tags/data/" class="page-link" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
    </li>
    
    <li class="page-item">
    <a href="/tags/data/" class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
    </li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/tags/data/">1</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item active"><a class="page-link" href="/tags/data/page/2/">2</a></li>
    
    
    <li class="page-item disabled">
    <a href="" class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
    </li>
    
    <li class="page-item">
        <a href="/tags/data/page/2/" class="page-link" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
    </li>
    
</ul>

    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/11/22/boxuk-for-the-social-good-hackday/">
                    BoxUK &#34;For the Social Good&#34; Hackday
                </a></h1>
            <p class="author">
                <span class="date">Tuesday, Nov 22, 2011</span>
            </p>
        </header>
        <div class="content">
            <p>Yesterday I attended the &ldquo;<a href="http://hackday.boxuk.com/">For the Social Good</a>&rdquo; hackday, organised by <a href="http://www.boxuk.com/">BoxUK</a> and held at the Students Union at Cardiff University. As you may have gathered from the title, it was a hackday themed around creating apps that had some benefit to society. The event ran from 10am to 10pm, so it was a fairly short hack event <a href="/2011/09/14/foursquare-hackathon/">compared to some</a>, which had a big influence on what could be done during the time available. In total, given the time needed for introductions and getting started in the morning, then for presentations and judging at the end of the day there was only actually about nine and a half hours of coding time, so it was quite a tough day. I went along with <a href="http://www.twitter.com/voxmjw">Matt Williams</a> and <a href="http://www.twitter.com/whitehankey">Mark Greenwood</a> as our team and over the course of the day we managed to put together a fairly functional web app.</p>

<p>We took <a href="/2011/11/22/foursquare-hackathon-post-mortem/">what we learnt</a> from hosting and participating in the Foursquare hackathon and used that to guide what we did at this hackday. At the last event we had been slow to get going, took too long to form a team and decide upon an idea. We had aimed too high to begin with, and then also let feature creep affect what we wanted to build. Finally, our teams were far too big, meaning it was hard to divide labour up so that everyone was participating and had something to do. We finished with a working app at the end of the event, but we were determined not to make the same mistakes this time so we could get a more successful outcome. (Not that FourCrawl wasn&rsquo;t a successful outcome of course, but more on that in the next couple of weeks.)</p>

<p>Going in to this hackday we solved the team size problem naturally, as there were only three of us able to attend which made forming a small team compulsory! To try and get a good start on the day of the event we met together on the Wednesday before to have a think about ideas and a bit of a brainstorming session. While we had a lot of ideas, most of them were too complex for a short day long hack event, so unfortunately we didn&rsquo;t really come up with anything. We did have a vague idea of doing something related to cold weather though, to make whatever &lsquo;it&rsquo; was topical, given that we&rsquo;re heading into winter now. Fortunately at least one of us (not me) had obviously been thinking about it further after the meeting and on Saturday evening Matt sent round a message on G+ that he&rsquo;d found a good data set we could use for an app that would be both easy to code within the time limit, and would hit the brief for the hackday pretty well. He&rsquo;d found a dataset on <a href="http://data.gov.uk/">data.gov.uk</a> related to <a href="http://data.gov.uk/dataset/road-accidents-safety-data">road accidents</a> that included information on weather and road surface conditions that we could use to show people where to avoid in icy weather, or to give them an idea of previous incidents in their area. With an idea starting to form we went into Sunday in a pretty good state, and ready to start coding very quickly.</p>

<p>The day started well, everyone arrived pretty much on time, which made for a quick start. Our app idea solidified easily, and early on we realised that while we had historical data to display it would also be nice to have some current updates, so we added a social element to the idea, by scraping twitter for a certain hashtag so that people could report problems with icy roads in their area, along the lines of the &lsquo;#uksnow&rsquo; hashtag that has been used frequently the last couple of winters. We were able to jump in quickly to start getting things built. Matt was in charge of getting the data into a database and building an api to query to retrieve it, using django to get a backend up and running quickly. I was in charge of building a front end map to display the data on, primarily working with HTML and javascript (and the Google Maps API obviously) and then Mark was in charge of getting the twitter scraping and postcode geo-locating working using python (so it could be slotted into the django backend), accessing the twitter API through <a href="http://tweepy.github.com/">tweepy</a>.</p>

<p>Things went really well with the implementation, I spent a while cannibalising elements from previous sites to get a frontend up and running quickly (and also thank you <a href="http://twitter.github.com/bootstrap/">bootstrap</a>!) and by lunch we were pretty close to starting to consolidate things together. We set a target of starting to deploy by 6, so that by the time dinner was served Matt was starting to battle his server and its stubborn refusal to allow easy deployment of django apps. Things went so smoothly in fact that we were all finished and ready with almost an hour to spare, meaning we were the only team able to slope off for a self-congratulatory pint before the presentations and judging. We headed to the Taf (a place I hadn&rsquo;t been in at least five years) for a swift one, then went back to the hackday for the final presentations.</p>

<p>Our presentation was first, and Matt demoed the app well while I played around on the laptop next to him. After us the rest of the teams went, and there were some really good apps shown off. My particular favourite was the &lsquo;<a href="http://occupywhere.herokuapp.com/">occupy where</a>&rsquo; app which allowed you to search for an &lsquo;occupy&rsquo; camp or demo near a location, then presented information pulled in from multiple sources about that particular &lsquo;occupy&rsquo; movement. A nice idea, well executed. Following the presentations the judges spent some time talking, then announced the winners. The surprise of the day was that they&rsquo;d decided our app was the best and that we&rsquo;d won! I was pretty shocked, but it was a very nice surprise. A group of first years from COMSC were runners up, and then a third year COMSC student (<a href="http://www.twitter.com/TomJHancocks">Tom Hancocks</a>) won the best individual developer prize, so COMSC actually walked away with all the prizes! After a quick tear down of the venue it was time to head to the Taf for some celebratory drinks, a satisfying end to a really great day.</p>

<p><strong>UPDATE 25/11/11:</strong></p>

<p>There some excellent other write ups by various other people involved in the event below. I&rsquo;ll add to this list as and when I find any more:</p>

<p><a href="http://www.boxuk.com/news/box-uks-public-hacking-event-a-resounding-success">http://www.boxuk.com/news/box-uks-public-hacking-event-a-resounding-success</a></p>

<p><a href="http://johngreenaway.co.uk/hack-day-for-the-social-good">http://johngreenaway.co.uk/hack-day-for-the-social-good</a></p>

<p><a href="http://marvelley.com/2011/11/24/for-the-social-good-box-uk-hackday-1-recap/">http://marvelley.com/2011/11/24/for-the-social-good-box-uk-hackday-1-recap/</a></p>

<p><a href="http://whitehandkerchief.co.uk/blog/?p=53">http://whitehandkerchief.co.uk/blog/?p=53</a></p>

<p><a href="http://www.cs.cf.ac.uk/newsandevents/hackday.html">http://www.cs.cf.ac.uk/newsandevents/hackday.html</a></p>

<p><a href="http://www.cardiff.ac.uk/news/articles/diwrnod-hacio-7933.html">http://www.cardiff.ac.uk/news/articles/diwrnod-hacio-7933.html</a></p>

<p><a href="http://www.boxuk.com/blog/the-box-uk-hack-day-a-review">http://www.boxuk.com/blog/the-box-uk-hack-day-a-review </a></p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/06/09/logging-in-to-websites-with-python/">
                    Logging in to websites with python
                </a></h1>
            <p class="author">
                <span class="date">Thursday, Jun 9, 2011</span>
            </p>
        </header>
        <div class="content">
            <p>As <a href="http://users.cs.cf.ac.uk/M.J.Chorley/2011/06/09/scraping-myfitnesspal-dat/">previously explained</a>, I needed a python script to login to a website so I could access data. There&rsquo;s loads of examples out on the web of how to do this, my solution (mashed together from many examples) is described below. For the whole script, jump to the end.</p>

<p>Firstly, we need to set some simple variables about the website we&rsquo;re trying to log in to. Obviously, I&rsquo;m trying to login to myfitnesspal, but this process should work with most websites that use a simple form + cookie based login process. We need to set the url we are trying to access, where to post the login information to, and a file to store cookies in:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># url for website        </span>
base_url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;http://www.myfitnesspal.com&#39;</span>       
<span style="color:#75715e"># login action we want to post data to       </span>
login_action <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/account/login&#39;</span>       
<span style="color:#75715e"># file for storing cookies       </span>
cookie_file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;mfp.cookies&#39;</span></code></pre></div>
Then we need to setup our cookie storage, and url opener. We want the opener to be able to handle cookies and redirects:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> urllib<span style="color:#f92672">,</span> urllib2
<span style="color:#f92672">import</span> cookielib

<span style="color:#75715e"># set up a cookie jar to store cookies</span>
cj <span style="color:#f92672">=</span> cookielib<span style="color:#f92672">.</span>MozillaCookieJar(cookie_file)

<span style="color:#75715e"># set up opener to handle cookies, redirects etc</span>
self<span style="color:#f92672">.</span>opener <span style="color:#f92672">=</span> urllib2<span style="color:#f92672">.</span>build_opener(
     urllib2<span style="color:#f92672">.</span>HTTPRedirectHandler(),
     urllib2<span style="color:#f92672">.</span>HTTPHandler(debuglevel<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>),
     urllib2<span style="color:#f92672">.</span>HTTPSHandler(debuglevel<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>),            
     urllib2<span style="color:#f92672">.</span>HTTPCookieProcessor(cj)
)
<span style="color:#75715e"># pretend we&#39;re a web browser and not a python script</span>
opener<span style="color:#f92672">.</span>addheaders <span style="color:#f92672">=</span> [(<span style="color:#e6db74">&#39;User-agent&#39;</span>,
    (<span style="color:#e6db74">&#39;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_7) &#39;</span>
     <span style="color:#e6db74">&#39;AppleWebKit/535.1 (KHTML, like Gecko) &#39;</span>
     <span style="color:#e6db74">&#39;Chrome/13.0.782.13 Safari/535.1&#39;</span>))
]</code></pre></div>
Next we need to open the front page of the website once to set any initial tracking cookies:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># open the front page of the website to set</span>
<span style="color:#75715e"># and save initial cookies</span>
response <span style="color:#f92672">=</span> opener<span style="color:#f92672">.</span>open(base_url)
cj<span style="color:#f92672">.</span>save()<span style="color:#f92672">&lt;/</span>pre<span style="color:#f92672">&gt;</span>
Then <span style="color:#66d9ef">finally</span> we can call the login action <span style="color:#66d9ef">with</span> our username <span style="color:#f92672">and</span> password <span style="color:#f92672">and</span> login to the website:
<span style="color:#f92672">&lt;</span>pre<span style="color:#f92672">&gt;</span><span style="color:#75715e"># parameters for login action</span>
login_data <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>urlencode({
    <span style="color:#e6db74">&#39;username&#39;</span> : <span style="color:#e6db74">&#39;my_username&#39;</span>,
    <span style="color:#e6db74">&#39;password&#39;</span> : <span style="color:#e6db74">&#39;my_password&#39;</span>,
    <span style="color:#e6db74">&#39;remember_me&#39;</span> : True
})
<span style="color:#75715e"># construct the url</span>
login_url <span style="color:#f92672">=</span> base_url <span style="color:#f92672">+</span> login_action
<span style="color:#75715e"># then open it</span>
response <span style="color:#f92672">=</span> opener<span style="color:#f92672">.</span>open(login_url, login_data)
<span style="color:#75715e"># save the cookies and return the response       </span>
cj<span style="color:#f92672">.</span>save()</code></pre></div>
The parameters for the POST request (and the action to POST to) can usually be found by examining the source of the login page.</p>

<p>There you have it - you should now be logged into the website and can access any pages that the logged in user can normally access through a web browser. Any calls using the &lsquo;opener&rsquo; created above will present the right cookies for the logged in user. The cookies are saved to file, so next time you run the script you can check for cookies, try and use them, and only re-login if that doesn&rsquo;t work.</p>

<p>My full version is <a href="http://martinchorley.com/img/{{ page.date | date: &quot;%Y-%m-%d&quot;}}-{{page.slug}}/web_login.py_2.txt">attached</a> to this post, it&rsquo;s under a <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a> license, so feel free to use it for whatever.</p>

<p>Quite how this will cope when websites catch up to the new EU cookie legislation is anyone&rsquo;s guess. My guess is it won&rsquo;t.</p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/06/05/how-to-access-and-download-your-google-web-history-with-wget/">
                    How to access and download your Google Web History with wget
                </a></h1>
            <p class="author">
                <span class="date">Sunday, Jun 5, 2011</span>
            </p>
        </header>
        <div class="content">
            <p><a href="https://www.google.com/history/">Google Web History</a> has now been recording all of the searches I made in Google since about 2005. Obviously 6 years of search queries and results is a phenomenal amount of data, and it would be nice to get hold of it all to see what I could make of it. Fortunately Google make the data available as an RSS feed, although it&rsquo;s not particularly well <a href="http://www.google.com/support/accounts/bin/answer.py?hl=en&amp;answer=54464">documented</a>.</p>

<p>(caution - many &lsquo;ifs&rsquo; coming up next)</p>

<p>If you&rsquo;re logged into your Google account the rss feed can be accessed at:</p>

<pre><code>https://www.google.com/history/?q=&amp;output=rss&amp;num=NUM&amp;start=START
</code></pre>

<p>If you&rsquo;re using a *nix based operating system (Linux, Mac OS X etc) you can then use wget on the command line to get the data. The below example works for retrieving the 1000 most recent searches in your history:</p>

<pre><code>wget --user=GOOGLE_USERNAME  \
--password=PASSWORD --no-check-certificate \
&quot;https://www.google.com/history/?q=&amp;output=rss&amp;num=1000&amp;start=0&quot;
</code></pre>

<p>If you&rsquo;ve enabled 2-factor authentication on your google account you&rsquo;ll need to add an <a href="https://www.google.com/accounts/IssuedAuthSubTokens">app-specific</a> password for wget so it can access your account - the password in the example above should be this app-specific password, not your main account password. If you haven&rsquo;t enabled 2 factor authentication then you might be able to use your normal account password, but I haven&rsquo;t tested this.</p>

<p>A simple bash script will then allow you to download the entire search history:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#66d9ef">for</span> START in <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">1000</span> <span style="color:#ae81ff">2000</span> <span style="color:#ae81ff">3000</span> ... <span style="color:#ae81ff">50000</span>  
<span style="color:#66d9ef">do</span>   
 wget --user<span style="color:#f92672">=</span>GOOGLE_USERNAME <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  --password<span style="color:#f92672">=</span>WGET_APP_SPECIFIC_PASSWORD --no-check-certificate <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  <span style="color:#e6db74">&#34;https://www.google.com/history/?output=rss&amp;amp;num=1000&amp;amp;start=</span>$START<span style="color:#e6db74">&#34;</span>
<span style="color:#66d9ef">done</span></code></pre></div>
You may need to adjust the numbers in the first line - I had to go up to 50000 to get my entire search history back to 2005, you may need to make fewer calls if your history is shorter, or more if its longer.</p>

        </div>
    </article>
    
    

<ul class="pagination">
    
    <li class="page-item">
        <a href="/tags/data/" class="page-link" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
    </li>
    
    <li class="page-item">
    <a href="/tags/data/" class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
    </li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item"><a class="page-link" href="/tags/data/">1</a></li>
    
    
    
    
    
    
        
        
    
    
    <li class="page-item active"><a class="page-link" href="/tags/data/page/2/">2</a></li>
    
    
    <li class="page-item disabled">
    <a href="" class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
    </li>
    
    <li class="page-item">
        <a href="/tags/data/page/2/" class="page-link" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
    </li>
    
</ul>

</main>

    </div><script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-25500481-1', 'auto');
    ga('send', 'pageview');

</script>
<script>window.twttr = (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0],
            t = window.twttr || {};
        if (d.getElementById(id)) return t;
        js = d.createElement(s);
        js.id = id;
        js.src = "https://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js, fjs);

        t._e = [];
        t.ready = function (f) {
            t._e.push(f);
        };

        return t;
    }(document, "script", "twitter-wjs"));
</script></body>

</html>