<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#b100b2">
    <meta name="theme-color" content="#b100b2">

    <meta property="og:url" content="https://martinjc.com/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Martin Chorley">
    <meta property="og:site_name" content="Martin Chorley">
    <meta property="og:locale" content="en_GB">
    <meta property="article:author" content="Martin Chorley">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@martinjc">
    <meta name="twitter:url" content="https://martinjc.com">
    <meta name="twitter:title" content="Martin Chorley">

    <link rel="icon" href="/img/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Roboto|Scope+One" rel="stylesheet">
    <link rel="stylesheet" href="/css/main.css">
</head><body><header>
    <div class="social">
        <ul>
            <li><a href="https://www.twitter.com/martinjc" class="icon twitter" title="Twitter"><svg viewBox="0 0 512 512">
                        <path d="M419.6 168.6c-11.7 5.2-24.2 8.7-37.4 10.2 13.4-8.1 23.8-20.8 28.6-36 -12.6 7.5-26.5 12.9-41.3 15.8 -11.9-12.6-28.8-20.6-47.5-20.6 -42 0-72.9 39.2-63.4 79.9 -54.1-2.7-102.1-28.6-134.2-68 -17 29.2-8.8 67.5 20.1 86.9 -10.7-0.3-20.7-3.3-29.5-8.1 -0.7 30.2 20.9 58.4 52.2 64.6 -9.2 2.5-19.2 3.1-29.4 1.1 8.3 25.9 32.3 44.7 60.8 45.2 -27.4 21.4-61.8 31-96.4 27 28.8 18.5 63 29.2 99.8 29.2 120.8 0 189.1-102.1 185-193.6C399.9 193.1 410.9 181.7 419.6 168.6z" /></svg>
                    </a></li>
            <li><a href="mailto:ChorleyMJ@Cardiff.ac.uk" class="icon email" title="Email"><svg viewBox="0 0 512 512">
                        <path d="M101.3 141.6v228.9h0.3 308.4 0.8V141.6H101.3zM375.7 167.8l-119.7 91.5 -119.6-91.5H375.7zM127.6 194.1l64.1 49.1 -64.1 64.1V194.1zM127.8 344.2l84.9-84.9 43.2 33.1 43-32.9 84.7 84.7L127.8 344.2 127.8 344.2zM384.4 307.8l-64.4-64.4 64.4-49.3V307.8z" /></svg>
                    </a></li>
            <li><a href="https://www.facebook.com/martin.chorley" class="icon facebook" title="Facebook"><svg viewBox="0 0 512 512">
                        <path d="M211.9 197.4h-36.7v59.9h36.7V433.1h70.5V256.5h49.2l5.2-59.1h-54.4c0 0 0-22.1 0-33.7 0-13.9 2.8-19.5 16.3-19.5 10.9 0 38.2 0 38.2 0V82.9c0 0-40.2 0-48.8 0 -52.5 0-76.1 23.1-76.1 67.3C211.9 188.8 211.9 197.4 211.9 197.4z" /></svg>
                    </a></li>
            <li><a href="https://www.github.com/martinjc" class="icon github" title="GitHub"><svg viewBox="0 0 512 512">
                        <path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z" /></svg>
                    </a></li>
            <li><a href="https://www.instagram.com/martinjam" class="icon instagram" title="Instagram"><svg viewBox="0 0 512 512">
                        <g>
                            <path d="M256 109.3c47.8 0 53.4 0.2 72.3 1 17.4 0.8 26.9 3.7 33.2 6.2 8.4 3.2 14.3 7.1 20.6 13.4 6.3 6.3 10.1 12.2 13.4 20.6 2.5 6.3 5.4 15.8 6.2 33.2 0.9 18.9 1 24.5 1 72.3s-0.2 53.4-1 72.3c-0.8 17.4-3.7 26.9-6.2 33.2 -3.2 8.4-7.1 14.3-13.4 20.6 -6.3 6.3-12.2 10.1-20.6 13.4 -6.3 2.5-15.8 5.4-33.2 6.2 -18.9 0.9-24.5 1-72.3 1s-53.4-0.2-72.3-1c-17.4-0.8-26.9-3.7-33.2-6.2 -8.4-3.2-14.3-7.1-20.6-13.4 -6.3-6.3-10.1-12.2-13.4-20.6 -2.5-6.3-5.4-15.8-6.2-33.2 -0.9-18.9-1-24.5-1-72.3s0.2-53.4 1-72.3c0.8-17.4 3.7-26.9 6.2-33.2 3.2-8.4 7.1-14.3 13.4-20.6 6.3-6.3 12.2-10.1 20.6-13.4 6.3-2.5 15.8-5.4 33.2-6.2C202.6 109.5 208.2 109.3 256 109.3M256 77.1c-48.6 0-54.7 0.2-73.8 1.1 -19 0.9-32.1 3.9-43.4 8.3 -11.8 4.6-21.7 10.7-31.7 20.6 -9.9 9.9-16.1 19.9-20.6 31.7 -4.4 11.4-7.4 24.4-8.3 43.4 -0.9 19.1-1.1 25.2-1.1 73.8 0 48.6 0.2 54.7 1.1 73.8 0.9 19 3.9 32.1 8.3 43.4 4.6 11.8 10.7 21.7 20.6 31.7 9.9 9.9 19.9 16.1 31.7 20.6 11.4 4.4 24.4 7.4 43.4 8.3 19.1 0.9 25.2 1.1 73.8 1.1s54.7-0.2 73.8-1.1c19-0.9 32.1-3.9 43.4-8.3 11.8-4.6 21.7-10.7 31.7-20.6 9.9-9.9 16.1-19.9 20.6-31.7 4.4-11.4 7.4-24.4 8.3-43.4 0.9-19.1 1.1-25.2 1.1-73.8s-0.2-54.7-1.1-73.8c-0.9-19-3.9-32.1-8.3-43.4 -4.6-11.8-10.7-21.7-20.6-31.7 -9.9-9.9-19.9-16.1-31.7-20.6 -11.4-4.4-24.4-7.4-43.4-8.3C310.7 77.3 304.6 77.1 256 77.1L256 77.1z" />
                            <path d="M256 164.1c-50.7 0-91.9 41.1-91.9 91.9s41.1 91.9 91.9 91.9 91.9-41.1 91.9-91.9S306.7 164.1 256 164.1zM256 315.6c-32.9 0-59.6-26.7-59.6-59.6s26.7-59.6 59.6-59.6 59.6 26.7 59.6 59.6S288.9 315.6 256 315.6z" />
                            <circle cx="351.5" cy="160.5" r="21.5" />
                        </g>
                    </svg>
                    </a></li>
            <li><a href="https://www.last.fm/user/takitomouse" class="icon lastfm" title="Last.fm"><svg viewBox="0 0 512 512">
                        <path d="M230.104 336.568l-13.607-36.988c0 0-22.11 24.66-55.268 24.66 -29.341 0-50.172-25.512-50.172-66.328 0-52.293 26.359-71.001 52.297-71.001 37.412 0 49.316 24.234 59.522 55.273l13.607 42.518c13.603 41.236 39.113 74.402 112.666 74.402 52.727 0 88.437-16.155 88.437-58.672 0-34.438-19.56-52.297-56.125-60.802l-27.209-5.951c-18.707-4.252-24.233-11.906-24.233-24.659 0-14.456 11.478-22.96 30.189-22.96 20.406 0 31.458 7.653 33.162 25.935l42.516-5.103c-3.402-38.263-29.761-53.996-73.127-53.996 -38.266 0-75.68 14.456-75.68 60.799 0 28.912 14.029 47.197 49.315 55.697l28.916 6.801c21.683 5.104 28.908 14.031 28.908 26.363 0 15.73-15.305 22.107-44.218 22.107 -42.941 0-60.794-22.534-70.999-53.574l-14.032-42.513c-17.854-55.271-46.342-75.68-102.892-75.68 -62.499-0.001-95.663 39.538-95.663 106.715 0 64.628 33.164 99.489 92.689 99.489C207.141 359.1 230.104 336.568 230.104 336.568L230.104 336.568z" /></svg>
                    </a></li>
            <li><a href="https://uk.linkedin.com/in/martinchorley" class="icon linkedin" title="LinkedIn"><svg viewBox="0 0 512 512">
                        <path d="M186.4 142.4c0 19-15.3 34.5-34.2 34.5 -18.9 0-34.2-15.4-34.2-34.5 0-19 15.3-34.5 34.2-34.5C171.1 107.9 186.4 123.4 186.4 142.4zM181.4 201.3h-57.8V388.1h57.8V201.3zM273.8 201.3h-55.4V388.1h55.4c0 0 0-69.3 0-98 0-26.3 12.1-41.9 35.2-41.9 21.3 0 31.5 15 31.5 41.9 0 26.9 0 98 0 98h57.5c0 0 0-68.2 0-118.3 0-50-28.3-74.2-68-74.2 -39.6 0-56.3 30.9-56.3 30.9v-25.2H273.8z" /></svg>
                    </a></li>
        </ul>
    </div>


    <nav>
        <ul>|
            <li><a href="/">&nbsp;home</a>&nbsp;|</li>
            <li><a href="/blog">&nbsp;blog</a>&nbsp;|</li>
            <li><a href="/teaching">&nbsp;teaching</a>&nbsp;|</li>
            <li><a href="/research">&nbsp;research</a>&nbsp;|</li>
            <li><a href="/publications">&nbsp;publications</a>&nbsp;|</li>
        </ul>
    </nav>
</header><div id="content">
<main>
    

    
    <article class="blogpost">
        <header>
            <h1> <a href="/2015/01/26/nhs-hackday-2015/">
                    NHS Hackday 2015
                </a></h1>
            <p class="author">
                <span class="date">Monday, Jan 26, 2015</span>
            </p>
        </header>
        <div class="content">
            

<p>This weekend I took part in an incredibly successful <a href="http://nhshackday.com/">NHS hackday</a>, hosted at Cardiff University and organised by <a href="https://twitter.com/amcunningham">Anne Marie Cunningham</a> and James Morgan. We went as a team from the MSc in Computational Journalism, with myself and <a href="https://twitter.com/egrommet">Glyn</a> attending along with <a href="https://twitter.com/PoojaDante">Pooja</a>, <a href="https://twitter.com/NikitaVashisth">Nikita</a>, <a href="https://twitter.com/Idioteque90">Annalisa</a> and <a href="https://twitter.com/cboutaud">Charles</a>. At the last-minute I recruited a couple of ringers as well, dragging along <del>Rhys Priestland</del> <a href="https://twitter.com/flyingSparx">Dr William Wilberforce Webberley</a> from Comsc and <a href="https://twitter.com/voxmjw">Dr Matthew Williams</a>, previously of this parish. Annalisa also brought along Dan Hewitt, so in total we had a large and diverse team.</p>

<h1 id="the-hackday">The hackday</h1>

<p>This was the first NHS hackday I&rsquo;d attended, but I believe it&rsquo;s the second event held in Cardiff, so Anne Marie and the team have it down to a fine art. The whole weekend seemed to go pretty smoothly (barring a couple of misunderstandings on our part regarding the pitch sessions!). It was certainly one of the most well organised events that I&rsquo;ve attended, with all the necessary ingredients for successful coding: much power, many wifi and plenty of food, snacks and coffee. Anne Marie and the team deserve much recognition and thanks for their hard work. I&rsquo;m definitely in for next year.</p>

<p>The quality of the projects created at the hackday was incredibly high across the board, which was great to see. One of my favourites used an Oculus Rift virtual reality headset to create a zombie &lsquo;game&rsquo; that could be used to test people&rsquo;s peripheral vision. Another standout was a system for logging and visualising the ANGEL factors describing a patient&rsquo;s health situation. It was really pleasing to see these rank highly with the judges too, coming in third and second in the overall rankings. Other great projects brought an old Open Source project back to life, created a system for managing groups walking the Wales Coast path, and created automatic notification systems for healthcare processes. Overall it was a really interesting mix of projects, many of which have clear potential to become useful products within or alongside the NHS. As Matt commented in the pub afterwards, it&rsquo;s probably the first hackday we&rsquo;ve been to where several of the projects have clear original IP with commercial potential.</p>

<h1 id="our-project">Our project</h1>

<p>We had decided before the event that we wanted to build some visualisations of health data across Wales, something like <a href="http://nhsmaps.co.uk/">nhsmaps.co.uk</a>, but working with local health boards and local authorities in Wales. We split into two teams for the implementation: &lsquo;the data team&rsquo; who were responsible for sourcing, processing and inputting data, and the &lsquo;interface team&rsquo; who built the front-end and the visualisations.</p>

<p>Progress was good, with Matthew and William quickly defining a schema for describing data so that the data team could add multiple data sets and have the front-end automatically pick them up and be able to visualise them. The CompJ students worked to find and extract data, adding them to the github repository with the correct metadata. Meanwhile, I pulled a bunch of D3 code together for some simple visualisations.</p>

<p>By the end of the weekend we established a fairly decent system. It&rsquo;s able to visualise a few different types of data, at different resolutions, is mostly mobile friendly, and most importantly is easily extensible and adaptable. It&rsquo;s online now on our <a href="http://bit.ly/hewnhs">github pages</a>, and all the code and documentation is also in the <a href="https://github.com/compjcdf/nhs_hack">github repository</a>.</p>

<p>We&rsquo;ll continue development for a while to improve the usability and code quality, and hopefully we&rsquo;ll find a community willing to take the code base on and keep improving what could be a fairly useful resource for understanding the health of Wales.</p>

<h1 id="debrief">Debrief</h1>

<p>We didn&rsquo;t win any of the prizes, which is understandable. Our project was really focused on the public understanding of the NHS and health, and not for solving a particular need within (or for users of) the NHS. We knew this going in to the weekend, and we&rsquo;d taken the decision that it was more important to work on a project related to the course, so that the students could experience some of the tools and technologies they&rsquo;ll be using as the course progresses than to do something more closely aligned with the brief that would have perhaps been less relevant to the students work.</p>

<p>I need to thank Will and Matt for coming and helping the team. Without Matt wrangling the data team and showing them how to create json metadata descriptors we probably wouldn&rsquo;t have anywhere near as many example datasets as we do. Similarly, without Will&rsquo;s hard work on the front end interface, the project wouldn&rsquo;t look nearly as good as it does, or have anywhere near the functionality. His last-minute addition of localstorage for personal datasets was a triumph. (Sadly though he does lose some coder points for user agent sniffing to decide whether to show a mobile interface :-D.) They were both a massive help, and we couldn&rsquo;t have done it without them.</p>

<p>Also, of course, I need to congratulate the CompJ students, who gave up their weekend to trawl through datasets, pull figures off websites and out of pdf&rsquo;s, and create the lovely easy to process .csv files we needed. It was a great effort from them, and I&rsquo;m looking forward to our next Team CompJ hackday outing.</p>

<p>One thing that sadly did stand out was a lack of participation from Comsc undergraduate students, with only one or two attending. <a href="http://www.cs.cf.ac.uk/contactsandpeople/staffpage.php?emailname=Rob.Davies">Rob Davies</a> stopped by on Saturday, and both Will and I discussed with him what we can do to increase participation in these events. Hopefully we&rsquo;ll make some progress on that front in time for the next hackday.</p>

<h1 id="media">Media</h1>

<p>There&rsquo;s some great photos from the event on Flickr, courtesy of <a href="https://www.flickr.com/photos/paul_clarke/">Paul Clarke</a> (<a href="https://www.flickr.com/photos/paul_clarke/sets/72157650042039338/">Saturday</a> and <a href="https://www.flickr.com/photos/paul_clarke/sets/72157650456182132/">Sunday</a>).</p>

<h1 id="elsewhere">Elsewhere&hellip;</h1>

<p>We got a lovely <a href="https://goodpracticeexchange.wordpress.com/2015/01/24/nhs-hack-day-data-visualisation/">write-up about out project</a> from <a href="https://twitter.com/DyfrigWilliams">Dyfrig Williams</a> of the Good Practice Exchange at the Wales Audit Office. Dyfrig also curated a great <a href="https://storify.com/GoodPracticeWAO/nhs-hack-day-cardiff-2015">storify of the weekend</a>.</p>

<p>Hemavault labs have done a round up of the projects <a href="http://blog.hemavault.com/2015/01/27/nhs-hack-day-cardiff-2015-projects/">here</a></p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2014/11/19/quick-and-dirty-twitter-api-in-python/">
                    Quick and Dirty Twitter API in Python
                </a></h1>
            <p class="author">
                <span class="date">Wednesday, Nov 19, 2014</span>
            </p>
        </header>
        <div class="content">
            <p><strong>QUICK DISCLAIMER: this is a quick and dirty solution to a problem, so may not represent best coding practice, and has absolutely no error checking or handling. Use with caution&hellip;</strong></p>

<p>A recent project has needed me to scrape some data from Twitter. I considered using <a href="https://github.com/tweepy/tweepy">Tweepy</a>, but as it was a project for the <a href="compj.cs.cf.ac.uk">MSc in Computational Journalism</a>, I thought it would be more interesting to write our own simple Twitter API wrapper in Python.</p>

<p>The code presented here will allow you to make any API request to Twitter that uses a GET request, so is really only useful for getting data <em>from</em> Twitter, not sending it <em>to</em> Twitter. It is also only for using with the REST API, not the streaming API, so if you&rsquo;re looking for realtime monitoring, this is not the API wrapper you&rsquo;re looking for. This API wrapper also uses a single user&rsquo;s authentication (yours), so is not setup to allow other users to use Twitter through your application.</p>

<p>The first step is to get some access credentials from Twitter. Head over to <a href="https://apps.twitter.com/">https://apps.twitter.com/</a> and register a new application. Once the application is created, you&rsquo;ll be able to access its details. Under &lsquo;Keys and Access Tokens&rsquo; are four values we&rsquo;re going to need for the API - the  <code>Consumer Key</code> and <code>Consumer Secret</code>, and the <code>Access Token</code> and <code>Access Token Secret</code>. Copy all four values into a new python file, and save it as &lsquo;<code>_credentials.py</code>&rsquo;. Once we have the credentials, we can write some code to make some API requests!</p>

<p>First, we define a Twitter API object that will carry out our API requests. We need to store the API url, and some details to allow us to throttle our requests to Twitter to fit inside their rate limiting.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Twitter_API</span>:

 <span style="color:#66d9ef">def</span> __init__(self):

   <span style="color:#75715e"># URL for accessing API</span>
   scheme <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://&#34;</span>
   api_url <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;api.twitter.com&#34;</span>
   version <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1.1&#34;</span>

   self<span style="color:#f92672">.</span>api_base <span style="color:#f92672">=</span> scheme <span style="color:#f92672">+</span> api_url <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;/&#34;</span> <span style="color:#f92672">+</span> version

   <span style="color:#75715e">#</span>
   <span style="color:#75715e"># seconds between queries to each endpoint</span>
   <span style="color:#75715e"># queries in this project limited to 180</span>
   <span style="color:#75715e"># per 15 minutes</span>
   query_interval <span style="color:#f92672">=</span> float(<span style="color:#ae81ff">15</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">60</span>)<span style="color:#f92672">/</span>(<span style="color:#ae81ff">175</span>)

   <span style="color:#75715e">#</span>
   <span style="color:#75715e"># rate limiting timer</span>
   self<span style="color:#f92672">.</span>__monitor <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;wait&#39;</span>:query_interval,
     <span style="color:#e6db74">&#39;earliest&#39;</span>:None,
     <span style="color:#e6db74">&#39;timer&#39;</span>:None}</code></pre></div>

<p>We add a rate limiting method that will make our API sleep if we are requesting things from Twitter too fast:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#</span>
<span style="color:#75715e"># rate_controller puts the thread to sleep</span>
<span style="color:#75715e"># if we&#39;re hitting the API too fast</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">__rate_controller</span>(self, monitor_dict):

 <span style="color:#75715e">#</span>
 <span style="color:#75715e"># join the timer thread</span>
 <span style="color:#66d9ef">if</span> monitor_dict[<span style="color:#e6db74">&#39;timer&#39;</span>] <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> None:
 monitor_dict[<span style="color:#e6db74">&#39;timer&#39;</span>]<span style="color:#f92672">.</span>join()

 <span style="color:#75715e"># sleep if necessary</span>
 <span style="color:#66d9ef">while</span> time<span style="color:#f92672">.</span>time() <span style="color:#f92672">&lt;</span> monitor_dict[<span style="color:#e6db74">&#39;earliest&#39;</span>]:
   time<span style="color:#f92672">.</span>sleep(monitor_dict[<span style="color:#e6db74">&#39;earliest&#39;</span>] <span style="color:#f92672">-</span> time<span style="color:#f92672">.</span>time())

 <span style="color:#75715e"># work out then the next API call can be made</span>
 earliest <span style="color:#f92672">=</span> time<span style="color:#f92672">.</span>time() <span style="color:#f92672">+</span> monitor_dict[<span style="color:#e6db74">&#39;wait&#39;</span>]
 timer <span style="color:#f92672">=</span> threading<span style="color:#f92672">.</span>Timer( earliest<span style="color:#f92672">-</span>time<span style="color:#f92672">.</span>time(), <span style="color:#66d9ef">lambda</span>: None )
 monitor_dict[<span style="color:#e6db74">&#39;earliest&#39;</span>] <span style="color:#f92672">=</span> earliest
 monitor_dict[<span style="color:#e6db74">&#39;timer&#39;</span>] <span style="color:#f92672">=</span> timer
 monitor_dict[<span style="color:#e6db74">&#39;timer&#39;</span>]<span style="color:#f92672">.</span>start()</code></pre></div>

<p>The Twitter API requires us to supply authentication headers in the request. One of these headers is a signature, created by encoding details of the request. We can write a function that will take in all the details of the request (method, url, parameters) and create the signature:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#</span>
<span style="color:#75715e"># make the signature for the API request</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">get_signature</span>(self, method, url, params):

 <span style="color:#75715e"># escape special characters in all parameter keys</span>
 encoded_params <span style="color:#f92672">=</span> {}
 <span style="color:#66d9ef">for</span> k, v <span style="color:#f92672">in</span> params<span style="color:#f92672">.</span>items():
   encoded_k <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>parse<span style="color:#f92672">.</span>quote_plus(str(k))
   encoded_v <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>parse<span style="color:#f92672">.</span>quote_plus(str(v))
   encoded_params[encoded_k] <span style="color:#f92672">=</span> encoded_v

 <span style="color:#75715e"># sort the parameters alphabetically by key</span>
 sorted_keys <span style="color:#f92672">=</span> sorted(encoded_params<span style="color:#f92672">.</span>keys())

 <span style="color:#75715e"># create a string from the parameters</span>
 signing_string <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>

 count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
 <span style="color:#66d9ef">for</span> key <span style="color:#f92672">in</span> sorted_keys:
   signing_string <span style="color:#f92672">+=</span> key
   signing_string <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;=&#34;</span>
   signing_string <span style="color:#f92672">+=</span> encoded_params[key]
   count <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
   <span style="color:#66d9ef">if</span> count <span style="color:#f92672">&lt;</span> len(sorted_keys):
     signing_string <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;&amp;&#34;</span>

 <span style="color:#75715e"># construct the base string</span>
 base_string <span style="color:#f92672">=</span> method<span style="color:#f92672">.</span>upper()
 base_string <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;&amp;&#34;</span>
 base_string <span style="color:#f92672">+=</span> urllib<span style="color:#f92672">.</span>parse<span style="color:#f92672">.</span>quote_plus(url)
 base_string <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;&amp;&#34;</span>
 base_string <span style="color:#f92672">+=</span> urllib<span style="color:#f92672">.</span>parse<span style="color:#f92672">.</span>quote_plus(signing_string)

 <span style="color:#75715e"># construct the key</span>
 signing_key <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>parse<span style="color:#f92672">.</span>quote_plus(client_secret) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;&amp;&#34;</span> <span style="color:#f92672">+</span> urllib<span style="color:#f92672">.</span>parse<span style="color:#f92672">.</span>quote_plus(access_secret)

 <span style="color:#75715e"># encrypt the base string with the key, and base64 encode the result</span>
 hashed <span style="color:#f92672">=</span> hmac<span style="color:#f92672">.</span>new(signing_key<span style="color:#f92672">.</span>encode(), base_string<span style="color:#f92672">.</span>encode(), sha1)
 signature <span style="color:#f92672">=</span> base64<span style="color:#f92672">.</span>b64encode(hashed<span style="color:#f92672">.</span>digest())
 <span style="color:#66d9ef">return</span> signature<span style="color:#f92672">.</span>decode(<span style="color:#e6db74">&#34;utf-8&#34;</span>)</code></pre></div>

<p>Finally, we can write a method to actually <em>make</em> the API request:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">query_get</span>(self, endpoint, aspect, get_params<span style="color:#f92672">=</span>{}):

 <span style="color:#75715e">#</span>
 <span style="color:#75715e"># rate limiting</span>
 self<span style="color:#f92672">.</span>__rate_controller(self<span style="color:#f92672">.</span>__monitor)

 <span style="color:#75715e"># ensure we&#39;re dealing with strings as parameters</span>
 str_param_data <span style="color:#f92672">=</span> {}
 <span style="color:#66d9ef">for</span> k, v <span style="color:#f92672">in</span> get_params<span style="color:#f92672">.</span>items():
   str_param_data[str(k)] <span style="color:#f92672">=</span> str(v)

 <span style="color:#75715e"># construct the query url</span>
 url <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>api_base <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;/&#34;</span> <span style="color:#f92672">+</span> endpoint <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;/&#34;</span> <span style="color:#f92672">+</span> aspect <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;.json&#34;</span>

 <span style="color:#75715e"># add the header parameters for authorisation</span>
 header_parameters <span style="color:#f92672">=</span> {
   <span style="color:#e6db74">&#34;oauth_consumer_key&#34;</span>: client_id,
   <span style="color:#e6db74">&#34;oauth_nonce&#34;</span>: uuid<span style="color:#f92672">.</span>uuid4(),
   <span style="color:#e6db74">&#34;oauth_signature_method&#34;</span>: <span style="color:#e6db74">&#34;HMAC-SHA1&#34;</span>,
   <span style="color:#e6db74">&#34;oauth_timestamp&#34;</span>: time<span style="color:#f92672">.</span>time(),
   <span style="color:#e6db74">&#34;oauth_token&#34;</span>: access_token,
   <span style="color:#e6db74">&#34;oauth_version&#34;</span>: <span style="color:#ae81ff">1.0</span>
 }

 <span style="color:#75715e"># collect all the parameters together for creating the signature</span>
 signing_parameters <span style="color:#f92672">=</span> {}
 <span style="color:#66d9ef">for</span> k, v <span style="color:#f92672">in</span> header_parameters<span style="color:#f92672">.</span>items():
   signing_parameters[k] <span style="color:#f92672">=</span> v
 <span style="color:#66d9ef">for</span> k, v <span style="color:#f92672">in</span> str_param_data<span style="color:#f92672">.</span>items():
   signing_parameters[k] <span style="color:#f92672">=</span> v

 <span style="color:#75715e"># create the signature and add it to the header parameters</span>
 header_parameters[<span style="color:#e6db74">&#34;oauth_signature&#34;</span>] <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>get_signature(<span style="color:#e6db74">&#34;GET&#34;</span>, url, signing_parameters)

 <span style="color:#75715e"># add the OAuth headers</span>
 header_string <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;OAuth &#34;</span>
 count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
 <span style="color:#66d9ef">for</span> k, v <span style="color:#f92672">in</span> header_parameters<span style="color:#f92672">.</span>items():
   header_string <span style="color:#f92672">+=</span> urllib<span style="color:#f92672">.</span>parse<span style="color:#f92672">.</span>quote_plus(str(k))
   header_string <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;=</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">&#34;</span>
   header_string <span style="color:#f92672">+=</span> urllib<span style="color:#f92672">.</span>parse<span style="color:#f92672">.</span>quote_plus(str(v))
   header_string <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">&#34;</span>
   count <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
   <span style="color:#66d9ef">if</span> count <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">7</span>:
     header_string <span style="color:#f92672">+=</span> <span style="color:#e6db74">&#34;, &#34;</span>

 headers <span style="color:#f92672">=</span> {
   <span style="color:#e6db74">&#34;Authorization&#34;</span>: header_string
 }

 <span style="color:#75715e"># create the full url including parameters</span>
 url <span style="color:#f92672">=</span> url <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;?&#34;</span> <span style="color:#f92672">+</span> urllib<span style="color:#f92672">.</span>parse<span style="color:#f92672">.</span>urlencode(str_param_data)
 request <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>Request(url, headers<span style="color:#f92672">=</span>headers)

 <span style="color:#75715e"># make the API request</span>
 <span style="color:#66d9ef">try</span>:
   response <span style="color:#f92672">=</span> urllib<span style="color:#f92672">.</span>request<span style="color:#f92672">.</span>urlopen(request)
   <span style="color:#66d9ef">except</span> urllib<span style="color:#f92672">.</span>error<span style="color:#f92672">.</span>HTTPError <span style="color:#66d9ef">as</span> e:
   <span style="color:#66d9ef">print</span>(e)
 <span style="color:#66d9ef">raise</span> e
   <span style="color:#66d9ef">except</span> urllib<span style="color:#f92672">.</span>error<span style="color:#f92672">.</span>URLError <span style="color:#66d9ef">as</span> e:
   <span style="color:#66d9ef">print</span>(e)
   <span style="color:#66d9ef">raise</span> e

 <span style="color:#75715e"># read the response and return the json</span>
 raw_data <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>read()<span style="color:#f92672">.</span>decode(<span style="color:#e6db74">&#34;utf-8&#34;</span>)
 <span style="color:#66d9ef">return</span> json<span style="color:#f92672">.</span>loads(raw_data)</code></pre></div>

<p>Putting this all together, we have a simple Python class that acts as an API wrapper for GET requests to the Twitter REST API, including the signing and authentication of those requests. Using it is as simple as:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"> ta <span style="color:#f92672">=</span> Twitter_API()

 <span style="color:#75715e"># retrieve tweets for a user</span>
 params <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;screen_name&#34;</span>: <span style="color:#e6db74">&#34;martinjc&#34;</span>,
 }

 user_tweets <span style="color:#f92672">=</span> ta<span style="color:#f92672">.</span>query_get(<span style="color:#e6db74">&#34;statuses&#34;</span>, <span style="color:#e6db74">&#34;user_timeline&#34;</span>, params)</code></pre></div>

<p>As always, the full code is online on Github, in both my <a href="https://github.com/CompJCDF/Simple-Python-Twitter-API">personal account</a> and the <a href="https://github.com/CompJCDF">account for</a> the <a href="http://compj.cs.cf.ac.uk/">MSc Computational Journalism</a>.</p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/11/22/boxuk-for-the-social-good-hackday/">
                    BoxUK &#34;For the Social Good&#34; Hackday
                </a></h1>
            <p class="author">
                <span class="date">Tuesday, Nov 22, 2011</span>
            </p>
        </header>
        <div class="content">
            <p>Yesterday I attended the &ldquo;<a href="http://hackday.boxuk.com/">For the Social Good</a>&rdquo; hackday, organised by <a href="http://www.boxuk.com/">BoxUK</a> and held at the Students Union at Cardiff University. As you may have gathered from the title, it was a hackday themed around creating apps that had some benefit to society. The event ran from 10am to 10pm, so it was a fairly short hack event <a href="/2011/09/14/foursquare-hackathon/">compared to some</a>, which had a big influence on what could be done during the time available. In total, given the time needed for introductions and getting started in the morning, then for presentations and judging at the end of the day there was only actually about nine and a half hours of coding time, so it was quite a tough day. I went along with <a href="http://www.twitter.com/voxmjw">Matt Williams</a> and <a href="http://www.twitter.com/whitehankey">Mark Greenwood</a> as our team and over the course of the day we managed to put together a fairly functional web app.</p>

<p>We took <a href="/2011/11/22/foursquare-hackathon-post-mortem/">what we learnt</a> from hosting and participating in the Foursquare hackathon and used that to guide what we did at this hackday. At the last event we had been slow to get going, took too long to form a team and decide upon an idea. We had aimed too high to begin with, and then also let feature creep affect what we wanted to build. Finally, our teams were far too big, meaning it was hard to divide labour up so that everyone was participating and had something to do. We finished with a working app at the end of the event, but we were determined not to make the same mistakes this time so we could get a more successful outcome. (Not that FourCrawl wasn&rsquo;t a successful outcome of course, but more on that in the next couple of weeks.)</p>

<p>Going in to this hackday we solved the team size problem naturally, as there were only three of us able to attend which made forming a small team compulsory! To try and get a good start on the day of the event we met together on the Wednesday before to have a think about ideas and a bit of a brainstorming session. While we had a lot of ideas, most of them were too complex for a short day long hack event, so unfortunately we didn&rsquo;t really come up with anything. We did have a vague idea of doing something related to cold weather though, to make whatever &lsquo;it&rsquo; was topical, given that we&rsquo;re heading into winter now. Fortunately at least one of us (not me) had obviously been thinking about it further after the meeting and on Saturday evening Matt sent round a message on G+ that he&rsquo;d found a good data set we could use for an app that would be both easy to code within the time limit, and would hit the brief for the hackday pretty well. He&rsquo;d found a dataset on <a href="http://data.gov.uk/">data.gov.uk</a> related to <a href="http://data.gov.uk/dataset/road-accidents-safety-data">road accidents</a> that included information on weather and road surface conditions that we could use to show people where to avoid in icy weather, or to give them an idea of previous incidents in their area. With an idea starting to form we went into Sunday in a pretty good state, and ready to start coding very quickly.</p>

<p>The day started well, everyone arrived pretty much on time, which made for a quick start. Our app idea solidified easily, and early on we realised that while we had historical data to display it would also be nice to have some current updates, so we added a social element to the idea, by scraping twitter for a certain hashtag so that people could report problems with icy roads in their area, along the lines of the &lsquo;#uksnow&rsquo; hashtag that has been used frequently the last couple of winters. We were able to jump in quickly to start getting things built. Matt was in charge of getting the data into a database and building an api to query to retrieve it, using django to get a backend up and running quickly. I was in charge of building a front end map to display the data on, primarily working with HTML and javascript (and the Google Maps API obviously) and then Mark was in charge of getting the twitter scraping and postcode geo-locating working using python (so it could be slotted into the django backend), accessing the twitter API through <a href="http://tweepy.github.com/">tweepy</a>.</p>

<p>Things went really well with the implementation, I spent a while cannibalising elements from previous sites to get a frontend up and running quickly (and also thank you <a href="http://twitter.github.com/bootstrap/">bootstrap</a>!) and by lunch we were pretty close to starting to consolidate things together. We set a target of starting to deploy by 6, so that by the time dinner was served Matt was starting to battle his server and its stubborn refusal to allow easy deployment of django apps. Things went so smoothly in fact that we were all finished and ready with almost an hour to spare, meaning we were the only team able to slope off for a self-congratulatory pint before the presentations and judging. We headed to the Taf (a place I hadn&rsquo;t been in at least five years) for a swift one, then went back to the hackday for the final presentations.</p>

<p>Our presentation was first, and Matt demoed the app well while I played around on the laptop next to him. After us the rest of the teams went, and there were some really good apps shown off. My particular favourite was the &lsquo;<a href="http://occupywhere.herokuapp.com/">occupy where</a>&rsquo; app which allowed you to search for an &lsquo;occupy&rsquo; camp or demo near a location, then presented information pulled in from multiple sources about that particular &lsquo;occupy&rsquo; movement. A nice idea, well executed. Following the presentations the judges spent some time talking, then announced the winners. The surprise of the day was that they&rsquo;d decided our app was the best and that we&rsquo;d won! I was pretty shocked, but it was a very nice surprise. A group of first years from COMSC were runners up, and then a third year COMSC student (<a href="http://www.twitter.com/TomJHancocks">Tom Hancocks</a>) won the best individual developer prize, so COMSC actually walked away with all the prizes! After a quick tear down of the venue it was time to head to the Taf for some celebratory drinks, a satisfying end to a really great day.</p>

<p><strong>UPDATE 25/11/11:</strong></p>

<p>There some excellent other write ups by various other people involved in the event below. I&rsquo;ll add to this list as and when I find any more:</p>

<p><a href="http://www.boxuk.com/news/box-uks-public-hacking-event-a-resounding-success">http://www.boxuk.com/news/box-uks-public-hacking-event-a-resounding-success</a></p>

<p><a href="http://johngreenaway.co.uk/hack-day-for-the-social-good">http://johngreenaway.co.uk/hack-day-for-the-social-good</a></p>

<p><a href="http://marvelley.com/2011/11/24/for-the-social-good-box-uk-hackday-1-recap/">http://marvelley.com/2011/11/24/for-the-social-good-box-uk-hackday-1-recap/</a></p>

<p><a href="http://whitehandkerchief.co.uk/blog/?p=53">http://whitehandkerchief.co.uk/blog/?p=53</a></p>

<p><a href="http://www.cs.cf.ac.uk/newsandevents/hackday.html">http://www.cs.cf.ac.uk/newsandevents/hackday.html</a></p>

<p><a href="http://www.cardiff.ac.uk/news/articles/diwrnod-hacio-7933.html">http://www.cardiff.ac.uk/news/articles/diwrnod-hacio-7933.html</a></p>

<p><a href="http://www.boxuk.com/blog/the-box-uk-hack-day-a-review">http://www.boxuk.com/blog/the-box-uk-hack-day-a-review </a></p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/11/22/foursquare-hackathon-post-mortem/">
                    Foursquare Hackathon Post Mortem
                </a></h1>
            <p class="author">
                <span class="date">Tuesday, Nov 22, 2011</span>
            </p>
        </header>
        <div class="content">
            

<p><strong>Note: I wrote this post just after the hackathon, but then forgot to actually publish it! </strong></p>

<p>There&rsquo;s a fair amount I learnt from taking part in and helping to organise the <a href="/2011/09/14/foursquare-hackathon/">foursquare hackathon</a> here at the university that probably deserves its own post. I&rsquo;ll split it into two parts, the taking part and the organisation.</p>

<h2 id="organising-a-hack-event">Organising a hack event</h2>

<p>There were a couple of things I learnt from helping to organise the event that perhaps weren&rsquo;t clear to begin with:</p>

<ol>
<li><p>Expect dropouts. A lot of them. We ended up with about 50% of the people that said they would attend actually attending. Which is fine because we hadn&rsquo;t planned on providing catering etc. anyway, but if we had, we may have overspent massively.</p></li>

<li><p>Get someone in to run the day that <em>doesn&rsquo;t actually want to code</em>. All three of us organising the event really wanted to get involved and create stuff, so there was no-one left to organise the other essential things like food. Too often people would talk about ordering food, or going out for dinner and then get sucked back into programming and it would get forgotten about. By the end of the weekend we&rsquo;d all eaten really badly, often very late at night. Having someone there to do things like order pizza or make coffee runs would probably have helped things go a lot smoother.</p></li>

<li><p>If you&rsquo;re going to be communicating with the world at large using twitter or something similar, make sure you communicate with each other within the organising team about posting updates. Often two people would try and reply to a query at the same time, which made us look a bit silly. Not a major issue, but it might help give a more professional feel, event if you&rsquo;re total amateurs.</p></li>
</ol>

<h2 id="participating-in-a-hack-event">Participating in a hack event</h2>

<p>We also learnt a lot about participating in a hack event. My top tips for a successful project would be:</p>

<ol>
<li><p>Do your research. If you can, go into the event with an idea already, just in case no-one else has any. It&rsquo;ll help you get started quicker.</p></li>

<li><p>Keep it small. Don&rsquo;t over reach. <sup>24</sup>&frasl;<sub>48</sub> hours is not a long time to code something, and by making it too complicated you&rsquo;ll be disappointed with the outcome. Simple is best. Add extra features later if you have time.</p></li>

<li><p>Small, agile teams. These projects have to be small because of the time constraints, so if teams get too big there won&rsquo;t be enough for everyone to do. People will end up feeling useless or left out, which is never good. I would say a maximum of 4 people per team.</p></li>

<li><p>If you want to learn something new, a hack event can be a great place to be forced to up your skills in a particular area very quickly. It can also be a great place to learn new skills and tools from others. However, this may lead to the end result not being ideal. If you can live with that, great, you&rsquo;ll walk away happy. I personally upped my javascript knowledge over the weekend from approximately 0 to something approaching a passable working knowledge, which was great.</p></li>

<li><p>Know your tools. This is pretty much common sense, but if you&rsquo;re not after learning something new and you just want a successful app/outcome, pick and use the tools you know really well. We went with django on the back end because myself and Matt know it pretty well, and we were able to get that part of the site running really really quickly. Had we gone with something else it may not have worked so well.</p></li>

<li><p>Get coding. Screw the design, you can worry about that later. Start coding early, and code fast.</p></li>
</ol>

<p>So thats the things I learnt from the weekend. Hopefully we&rsquo;ll be able to use this knowledge again in the future, both organising and participating in future events.</p>

        </div>
    </article>
    
    <article class="blogpost">
        <header>
            <h1> <a href="/2011/06/09/scraping-data-from-myfitnesspal-with-python/">
                    Scraping data from MyFitnessPal with python
                </a></h1>
            <p class="author">
                <span class="date">Thursday, Jun 9, 2011</span>
            </p>
        </header>
        <div class="content">
            <p>Following my <a href="http://users.cs.cf.ac.uk/M.J.Chorley/2011/06/07/web-search-wordle/">success</a> with <a href="http://users.cs.cf.ac.uk/M.J.Chorley/2011/06/05/google-web-history/">extracting</a> my Google Search History in a simple manner, I&rsquo;ve decided that I should do something similar to extract all the data I&rsquo;ve been feeding into <a href="http://www.myfitnesspal.com">myfitnesspal</a> for the last 5 months. As I briefly mentioned in the <a href="http://users.cs.cf.ac.uk/M.J.Chorley/2011/06/07/reviewmfp/">review of the app + website</a>, the progress graphs leave a lot to be desired and there&rsquo;s very little in the way of analysis of the data. I have a lot of questions about my progress and there is no easy way to answer all of them using just the website. For instance, what is my average sugar intake? Is this more or less than my target intake? How does my weekend nutrition compare to my weekday nutrition? How much beer have I drunk since starting to log all my food?</p>

<p>Unfortunately there isn&rsquo;t an API for the website yet, so I&rsquo;m going to need to resort to screen scraping to extract it all. This should be pretty easy using the <a href="http://www.crummy.com/software/BeautifulSoup/">BeautifulSoup</a> python library, but first I need to get access to the data. My food diary isn&rsquo;t public, so I need to be logged in to get access to it. This means my scraping script needs to pretend to be a web browser and log me in to the website in order to access the pages I need.</p>

<p>I initially toyed with the idea of reading cookies from the web browser sqlite cookie database, but this is overly complex. It&rsquo;s actually much easier just using python to do the login as a POST request and to store any cookies received back from that. Fortunately I&rsquo;m not the first person to try and do this, so there&rsquo;s <a href="http://stackoverflow.com/questions/2954381/python-form-post-using-urllib2-also-question-on-saving-using-cookies">plenty</a> of <a href="http://stackoverflow.com/questions/301924/python-urllib-urllib2-httplib-confusion">examples</a> on <a href="http://www.stackoverflow.com">StackOverflow</a> of how to do it. I&rsquo;ll post my own solution once it&rsquo;s done.</p>

        </div>
    </article>
    
    

</main>

    </div><script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-25500481-1', 'auto');
    ga('send', 'pageview');

</script>
<script>window.twttr = (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0],
            t = window.twttr || {};
        if (d.getElementById(id)) return t;
        js = d.createElement(s);
        js.id = id;
        js.src = "https://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js, fjs);

        t._e = [];
        t.ready = function (f) {
            t._e.push(f);
        };

        return t;
    }(document, "script", "twitter-wjs"));
</script></body>

</html>