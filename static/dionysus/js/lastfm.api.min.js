/*
 *
 * Copyright (c) 2008-2010, Felix Bruns <felixbruns@web.de>
 *
 */function LastFM(e){var t,n,r,s,o=e.apiKey||"",u=e.apiSecret||"",a=e.apiUrl||"http://ws.audioscrobbler.com/2.0/",f=e.cache||undefined;this.setApiKey=function(e){o=e};this.setApiSecret=function(e){u=e};this.setApiUrl=function(e){a=e};this.setCache=function(e){f=e};t=function(e,t,n){if(n=="POST"){var r=document.getElementsByTagName("html")[0],i=document.createElement("iframe"),o;i.width=1;i.height=1;i.style.border="none";i.onload=function(){typeof t.success!="undefined"&&t.success()};r.appendChild(i);typeof i.contentWindow!="undefined"?o=i.contentWindow.document:typeof i.contentDocument.document!="undefined"?o=i.contentDocument.document.document:o=i.contentDocument.document;o.open();o.clear();o.write('<form method="post" action="'+a+'" id="form">');for(var u in e)o.write('<input type="text" name="'+u+'" value="'+e[u]+'">');o.write("</form>");o.write('<script type="application/x-javascript">');o.write('document.getElementById("form").submit();');o.write("</script>");o.close()}else{var l="jsonp"+(new Date).getTime(),c=s.getApiSignature(e);if(typeof f!="undefined"&&f.contains(c)&&!f.isExpired(c)){typeof t.success!="undefined"&&t.success(f.load(c));return}e.callback=l;e.format="json";window[l]=function(n){if(typeof f!="undefined"){var r=f.getExpirationTime(e);r>0&&f.store(c,n,r)}typeof n.error!="undefined"?typeof t.error!="undefined"&&t.error(n.error,n.message):typeof t.success!="undefined"&&t.success(n);window[l]=undefined;try{delete window[l]}catch(i){}h&&h.removeChild(p)};var h=document.getElementsByTagName("head")[0],p=document.createElement("script"),d=[];for(var u in e)d.push(encodeURIComponent(u)+"="+encodeURIComponent(e[u]));p.src=a+"?"+d.join("&").replace(/%20/g,"+");h.appendChild(p)}};n=function(e,n,r,i){n=n||{};r=r||{};i=i||"GET";n.method=e;n.api_key=o;t(n,r,i)};r=function(e,n,r,i,u){n=n||{};i=i||{};u=u||"GET";n.method=e;n.api_key=o;r&&typeof r.key!="undefined"&&(n.sk=r.key);n.api_sig=s.getApiSignature(n);t(n,i,u)};this.album={addTags:function(e,t,n){typeof e.tags=="object"&&(e.tags=e.tags.join(","));r("album.addTags",e,t,n,"POST")},getBuylinks:function(e,t){n("album.getBuylinks",e,t)},getInfo:function(e,t){n("album.getInfo",e,t)},getTags:function(e,t,n){r("album.getTags",e,t,n)},removeTag:function(e,t,n){r("album.removeTag",e,t,n,"POST")},search:function(e,t){n("album.search",e,t)},share:function(e,t,n){typeof e.recipient=="object"&&(e.recipient=e.recipient.join(","));r("album.share",e,n)}};this.artist={addTags:function(e,t,n){typeof e.tags=="object"&&(e.tags=e.tags.join(","));r("artist.addTags",e,t,n,"POST")},getCorrection:function(e,t){n("artist.getCorrection",e,t)},getEvents:function(e,t){n("artist.getEvents",e,t)},getImages:function(e,t){n("artist.getImages",e,t)},getInfo:function(e,t){n("artist.getInfo",e,t)},getPastEvents:function(e,t){n("artist.getPastEvents",e,t)},getPodcast:function(e,t){n("artist.getPodcast",e,t)},getShouts:function(e,t){n("artist.getShouts",e,t)},getSimilar:function(e,t){n("artist.getSimilar",e,t)},getTags:function(e,t,n){r("artist.getTags",e,t,n)},getTopAlbums:function(e,t){n("artist.getTopAlbums",e,t)},getTopFans:function(e,t){n("artist.getTopFans",e,t)},getTopTags:function(e,t){n("artist.getTopTags",e,t)},getTopTracks:function(e,t){n("artist.getTopTracks",e,t)},removeTag:function(e,t,n){r("artist.removeTag",e,t,n,"POST")},search:function(e,t){n("artist.search",e,t)},share:function(e,t,n){typeof e.recipient=="object"&&(e.recipient=e.recipient.join(","));r("artist.share",e,t,n,"POST")},shout:function(e,t,n){r("artist.shout",e,t,n,"POST")}};this.auth={getMobileSession:function(e,t){e={username:e.username,authToken:md5(e.username+md5(e.password))};r("auth.getMobileSession",e,null,t)},getSession:function(e,t){r("auth.getSession",e,null,t)},getToken:function(e){r("auth.getToken",null,null,e)},getWebSession:function(e){var t=a;a="http://ext.last.fm/2.0/";r("auth.getWebSession",null,null,e);a=t}};this.chart={getHypedArtists:function(e,t,r){n("chart.getHypedArtists",e,r)},getHypedTracks:function(e,t,r){n("chart.getHypedTracks",e,r)},getLovedTracks:function(e,t,r){n("chart.getLovedTracks",e,r)},getTopArtists:function(e,t,r){n("chart.getTopArtists",e,r)},getTopTags:function(e,t,r){n("chart.getTopTags",e,r)},getTopTracks:function(e,t,r){n("chart.getTopTracks",e,r)}};this.event={attend:function(e,t,n){r("event.attend",e,t,n,"POST")},getAttendees:function(e,t,r){n("event.getAttendees",e,r)},getInfo:function(e,t){n("event.getInfo",e,t)},getShouts:function(e,t){n("event.getShouts",e,t)},share:function(e,t,n){typeof e.recipient=="object"&&(e.recipient=e.recipient.join(","));r("event.share",e,t,n,"POST")},shout:function(e,t,n){r("event.shout",e,t,n,"POST")}};this.geo={getEvents:function(e,t){n("geo.getEvents",e,t)},getMetroArtistChart:function(e,t){n("geo.getMetroArtistChart",e,t)},getMetroHypeArtistChart:function(e,t){n("geo.getMetroHypeArtistChart",e,t)},getMetroHypeTrackChart:function(e,t){n("geo.getMetroHypeTrackChart",e,t)},getMetroTrackChart:function(e,t){n("geo.getMetroTrackChart",e,t)},getMetroUniqueArtistChart:function(e,t){n("geo.getMetroUniqueArtistChart",e,t)},getMetroUniqueTrackChart:function(e,t){n("geo.getMetroUniqueTrackChart",e,t)},getMetroWeeklyChartlist:function(e,t){n("geo.getMetroWeeklyChartlist",e,t)},getMetros:function(e,t){n("geo.getMetros",e,t)},getTopArtists:function(e,t){n("geo.getTopArtists",e,t)},getTopTracks:function(e,t){n("geo.getTopTracks",e,t)}};this.group={getHype:function(e,t){n("group.getHype",e,t)},getMembers:function(e,t){n("group.getMembers",e,t)},getWeeklyAlbumChart:function(e,t){n("group.getWeeklyAlbumChart",e,t)},getWeeklyArtistChart:function(e,t){n("group.getWeeklyArtistChart",e,t)},getWeeklyChartList:function(e,t){n("group.getWeeklyChartList",e,t)},getWeeklyTrackChart:function(e,t){n("group.getWeeklyTrackChart",e,t)}};this.library={addAlbum:function(e,t,n){r("library.addAlbum",e,t,n,"POST")},addArtist:function(e,t,n){r("library.addArtist",e,t,n,"POST")},addTrack:function(e,t,n){r("library.addTrack",e,t,n,"POST")},getAlbums:function(e,t){n("library.getAlbums",e,t)},getArtists:function(e,t){n("library.getArtists",e,t)},getTracks:function(e,t){n("library.getTracks",e,t)}};this.playlist={addTrack:function(e,t,n){r("playlist.addTrack",e,t,n,"POST")},create:function(e,t,n){r("playlist.create",e,t,n,"POST")},fetch:function(e,t){n("playlist.fetch",e,t)}};this.radio={getPlaylist:function(e,t,n){r("radio.getPlaylist",e,t,n)},search:function(e,t,n){r("radio.search",e,t,n)},tune:function(e,t,n){r("radio.tune",e,t,n)}};this.tag={getInfo:function(e,t){n("tag.getInfo",e,t)},getSimilar:function(e,t){n("tag.getSimilar",e,t)},getTopAlbums:function(e,t){n("tag.getTopAlbums",e,t)},getTopArtists:function(e,t){n("tag.getTopArtists",e,t)},getTopTags:function(e){n("tag.getTopTags",null,e)},getTopTracks:function(e,t){n("tag.getTopTracks",e,t)},getWeeklyArtistChart:function(e,t){n("tag.getWeeklyArtistChart",e,t)},getWeeklyChartList:function(e,t){n("tag.getWeeklyChartList",e,t)},search:function(e,t){n("tag.search",e,t)}};this.tasteometer={compare:function(e,t){n("tasteometer.compare",e,t)},compareGroup:function(e,t){n("tasteometer.compareGroup",e,t)}};this.track={addTags:function(e,t,n){r("track.addTags",e,t,n,"POST")},ban:function(e,t,n){r("track.ban",e,t,n,"POST")},getBuylinks:function(e,t){n("track.getBuylinks",e,t)},getCorrection:function(e,t){n("track.getCorrection",e,t)},getFingerprintMetadata:function(e,t){n("track.getFingerprintMetadata",e,t)},getInfo:function(e,t){n("track.getInfo",e,t)},getShouts:function(e,t){n("track.getShouts",e,t)},getSimilar:function(e,t){n("track.getSimilar",e,t)},getTags:function(e,t,n){r("track.getTags",e,t,n)},getTopFans:function(e,t){n("track.getTopFans",e,t)},getTopTags:function(e,t){n("track.getTopTags",e,t)},love:function(e,t,n){r("track.love",e,t,n,"POST")},removeTag:function(e,t,n){r("track.removeTag",e,t,n,"POST")},scrobble:function(e,t){var n;if(e.constructor.toString().indexOf("Array")!=-1){n={};for(i in e)for(j in e[i])n[j+"["+i+"]"]=e[i][j];e=n}r("track.scrobble",e,session,t,"POST")},search:function(e,t){n("track.search",e,t)},share:function(e,t,n){typeof e.recipient=="object"&&(e.recipient=e.recipient.join(","));r("track.share",e,t,n,"POST")},unban:function(e,t,n){r("track.unban",e,t,n,"POST")},unlove:function(e,t,n){r("track.unlove",e,t,n,"POST")},updateNowPlaying:function(e,t,n){r("track.updateNowPlaying",e,t,n,"POST")}};this.user={getArtistTracks:function(e,t){n("user.getArtistTracks",e,t)},getBannedTracks:function(e,t){n("user.getBannedTracks",e,t)},getEvents:function(e,t){n("user.getEvents",e,t)},getFriends:function(e,t){n("user.getFriends",e,t)},getInfo:function(e,t){n("user.getInfo",e,t)},getLovedTracks:function(e,t){n("user.getLovedTracks",e,t)},getNeighbours:function(e,t){n("user.getNeighbours",e,t)},getNewReleases:function(e,t){n("user.getNewReleases",e,t)},getPastEvents:function(e,t){n("user.getPastEvents",e,t)},getPersonalTracks:function(e,t){n("user.getPersonalTracks",e,t)},getPlaylists:function(e,t){n("user.getPlaylists",e,t)},getRecentStations:function(e,t,n){r("user.getRecentStations",e,t,n)},getRecentTracks:function(e,t){n("user.getRecentTracks",e,t)},getRecommendedArtists:function(e,t,n){r("user.getRecommendedArtists",e,t,n)},getRecommendedEvents:function(e,t,n){r("user.getRecommendedEvents",e,t,n)},getShouts:function(e,t){n("user.getShouts",e,t)},getTopAlbums:function(e,t){n("user.getTopAlbums",e,t)},getTopArtists:function(e,t){n("user.getTopArtists",e,t)},getTopTags:function(e,t){n("user.getTopTags",e,t)},getTopTracks:function(e,t){n("user.getTopTracks",e,t)},getWeeklyAlbumChart:function(e,t){n("user.getWeeklyAlbumChart",e,t)},getWeeklyArtistChart:function(e,t){n("user.getWeeklyArtistChart",e,t)},getWeeklyChartList:function(e,t){n("user.getWeeklyChartList",e,t)},getWeeklyTrackChart:function(e,t){n("user.getWeeklyTrackChart",e,t)},shout:function(e,t,n){r("user.shout",e,t,n,"POST")}};this.venue={getEvents:function(e,t){n("venue.getEvents",e,t)},getPastEvents:function(e,t){n("venue.getPastEvents",e,t)},search:function(e,t){n("venue.search",e,t)}};s={getApiSignature:function(e){var t=[],n="";for(var r in e)t.push(r);t.sort();for(var i in t){var r=t[i];n+=r+e[r]}n+=u;return md5(n)}}};